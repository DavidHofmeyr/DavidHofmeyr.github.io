<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>MATH482: Statistical Learning</title>
  <meta name="description" content="MATH482: Statistical Learning" />
  <meta name="generator" content="bookdown 0.44 and GitBook 2.6.7" />

  <meta property="og:title" content="MATH482: Statistical Learning" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="MATH482: Statistical Learning" />
  
  
  

<meta name="author" content="David P. Hofmeyr" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  

<link rel="next" href="working-with-data-in-r.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="introduction-to-r.html"><a href="introduction-to-r.html"><i class="fa fa-check"></i><b>1</b> Introduction to R</a>
<ul>
<li class="chapter" data-level="1.1" data-path="introduction-to-r.html"><a href="introduction-to-r.html#background-on-r"><i class="fa fa-check"></i><b>1.1</b> Background on R</a></li>
<li class="chapter" data-level="1.2" data-path="introduction-to-r.html"><a href="introduction-to-r.html#getting-started-with-rstudio"><i class="fa fa-check"></i><b>1.2</b> Getting started with RStudio</a></li>
<li class="chapter" data-level="1.3" data-path="introduction-to-r.html"><a href="introduction-to-r.html#statements-expressions-and-objects"><i class="fa fa-check"></i><b>1.3</b> Statements, expressions and objects</a></li>
<li class="chapter" data-level="1.4" data-path="introduction-to-r.html"><a href="introduction-to-r.html#basic-plots"><i class="fa fa-check"></i><b>1.4</b> Basic plots</a></li>
<li class="chapter" data-level="1.5" data-path="introduction-to-r.html"><a href="introduction-to-r.html#r-scripts"><i class="fa fa-check"></i><b>1.5</b> R scripts</a></li>
<li class="chapter" data-level="1.6" data-path="introduction-to-r.html"><a href="introduction-to-r.html#r-markdown"><i class="fa fa-check"></i><b>1.6</b> R markdown</a></li>
<li class="chapter" data-level="1.7" data-path="introduction-to-r.html"><a href="introduction-to-r.html#functions"><i class="fa fa-check"></i><b>1.7</b> Functions</a></li>
<li class="chapter" data-level="1.8" data-path="introduction-to-r.html"><a href="introduction-to-r.html#s:0help"><i class="fa fa-check"></i><b>1.8</b> Getting Help</a></li>
<li class="chapter" data-level="1.9" data-path="introduction-to-r.html"><a href="introduction-to-r.html#loops-and-flow"><i class="fa fa-check"></i><b>1.9</b> Loops and Flow</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="working-with-data-in-r.html"><a href="working-with-data-in-r.html"><i class="fa fa-check"></i><b>2</b> Working with Data in R</a>
<ul>
<li class="chapter" data-level="2.1" data-path="working-with-data-in-r.html"><a href="working-with-data-in-r.html#data-frames"><i class="fa fa-check"></i><b>2.1</b> Data Frames</a></li>
<li class="chapter" data-level="2.2" data-path="working-with-data-in-r.html"><a href="working-with-data-in-r.html#importing-and-exporting-data"><i class="fa fa-check"></i><b>2.2</b> Importing and Exporting Data</a></li>
<li class="chapter" data-level="2.3" data-path="working-with-data-in-r.html"><a href="working-with-data-in-r.html#data-plotting"><i class="fa fa-check"></i><b>2.3</b> Data Plotting</a></li>
<li class="chapter" data-level="2.4" data-path="working-with-data-in-r.html"><a href="working-with-data-in-r.html#summary-2"><i class="fa fa-check"></i><b>2.4</b> Summary</a></li>
<li class="chapter" data-level="2.5" data-path="working-with-data-in-r.html"><a href="working-with-data-in-r.html#exercises-3"><i class="fa fa-check"></i><b>2.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="background.html"><a href="background.html"><i class="fa fa-check"></i><b>3</b> Statistical Background</a>
<ul>
<li class="chapter" data-level="3.1" data-path="background.html"><a href="background.html#probability-basics"><i class="fa fa-check"></i><b>3.1</b> Probability Basics</a></li>
<li class="chapter" data-level="3.2" data-path="background.html"><a href="background.html#random-variables"><i class="fa fa-check"></i><b>3.2</b> Random Variables</a></li>
<li class="chapter" data-level="3.3" data-path="background.html"><a href="background.html#samples-and-statistical-modelling"><i class="fa fa-check"></i><b>3.3</b> Samples and Statistical Modelling</a></li>
<li class="chapter" data-level="3.4" data-path="background.html"><a href="background.html#statistical-estimation"><i class="fa fa-check"></i><b>3.4</b> Statistical Estimation</a></li>
<li class="chapter" data-level="3.5" data-path="background.html"><a href="background.html#multivariate-random-variables-and-dependence"><i class="fa fa-check"></i><b>3.5</b> Multivariate Random Variables and Dependence</a></li>
<li class="chapter" data-level="3.6" data-path="background.html"><a href="background.html#summary-3"><i class="fa fa-check"></i><b>3.6</b> Summary</a></li>
<li class="chapter" data-level="3.7" data-path="background.html"><a href="background.html#exercises-4"><i class="fa fa-check"></i><b>3.7</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="fundamentals1.html"><a href="fundamentals1.html"><i class="fa fa-check"></i><b>4</b> The Fundamentals of Predictive Modelling I</a>
<ul>
<li class="chapter" data-level="4.1" data-path="fundamentals1.html"><a href="fundamentals1.html#two-archetypal-problems"><i class="fa fa-check"></i><b>4.1</b> Two Archetypal Problems</a></li>
<li class="chapter" data-level="4.2" data-path="fundamentals1.html"><a href="fundamentals1.html#some-preliminaries"><i class="fa fa-check"></i><b>4.2</b> Some Preliminaries</a></li>
<li class="chapter" data-level="4.3" data-path="fundamentals1.html"><a href="fundamentals1.html#model-training"><i class="fa fa-check"></i><b>4.3</b> Model Training</a></li>
<li class="chapter" data-level="4.4" data-path="fundamentals1.html"><a href="fundamentals1.html#summary-4"><i class="fa fa-check"></i><b>4.4</b> Summary</a></li>
<li class="chapter" data-level="4.5" data-path="fundamentals1.html"><a href="fundamentals1.html#exercises-5"><i class="fa fa-check"></i><b>4.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="fundamentals2.html"><a href="fundamentals2.html"><i class="fa fa-check"></i><b>5</b> The Fundamentals of Predictive Modelling II</a>
<ul>
<li class="chapter" data-level="5.1" data-path="fundamentals2.html"><a href="fundamentals2.html#a-quick-recap"><i class="fa fa-check"></i><b>5.1</b> A Quick Recap</a></li>
<li class="chapter" data-level="5.2" data-path="fundamentals2.html"><a href="fundamentals2.html#overfitting"><i class="fa fa-check"></i><b>5.2</b> Overfitting</a></li>
<li class="chapter" data-level="5.3" data-path="fundamentals2.html"><a href="fundamentals2.html#prediction-error-and-generalisation"><i class="fa fa-check"></i><b>5.3</b> Prediction Error and Generalisation</a></li>
<li class="chapter" data-level="5.4" data-path="fundamentals2.html"><a href="fundamentals2.html#estimating-expected-prediction-error"><i class="fa fa-check"></i><b>5.4</b> Estimating (Expected) Prediction Error</a></li>
<li class="chapter" data-level="5.5" data-path="fundamentals2.html"><a href="fundamentals2.html#summary-5"><i class="fa fa-check"></i><b>5.5</b> Summary</a></li>
<li class="chapter" data-level="5.6" data-path="fundamentals2.html"><a href="fundamentals2.html#exercises-6"><i class="fa fa-check"></i><b>5.6</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="linear.html"><a href="linear.html"><i class="fa fa-check"></i><b>6</b> Linear Regression: Ordinary Least Squares and Regularised Variants</a>
<ul>
<li class="chapter" data-level="6.1" data-path="linear.html"><a href="linear.html#the-linear-model"><i class="fa fa-check"></i><b>6.1</b> The Linear Model</a></li>
<li class="chapter" data-level="6.2" data-path="linear.html"><a href="linear.html#ordinary-least-squares"><i class="fa fa-check"></i><b>6.2</b> Ordinary Least Squares</a></li>
<li class="chapter" data-level="6.3" data-path="linear.html"><a href="linear.html#regularisation-for-linear-models"><i class="fa fa-check"></i><b>6.3</b> Regularisation for Linear Models</a></li>
<li class="chapter" data-level="6.4" data-path="linear.html"><a href="linear.html#summary-6"><i class="fa fa-check"></i><b>6.4</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="glms.html"><a href="glms.html"><i class="fa fa-check"></i><b>7</b> Generalised Linear Models</a>
<ul>
<li class="chapter" data-level="7.1" data-path="glms.html"><a href="glms.html#generalised-predictive-modelling"><i class="fa fa-check"></i><b>7.1</b> Generalised Predictive Modelling</a></li>
<li class="chapter" data-level="7.2" data-path="glms.html"><a href="glms.html#classification-and-logistic-regression"><i class="fa fa-check"></i><b>7.2</b> Classification and Logistic Regression</a></li>
<li class="chapter" data-level="7.3" data-path="glms.html"><a href="glms.html#summary-7"><i class="fa fa-check"></i><b>7.3</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="nonlinear1.html"><a href="nonlinear1.html"><i class="fa fa-check"></i><b>8</b> Nonlinearity Part I</a>
<ul>
<li class="chapter" data-level="8.1" data-path="nonlinear1.html"><a href="nonlinear1.html#basis-expansions"><i class="fa fa-check"></i><b>8.1</b> Basis Expansions</a></li>
<li class="chapter" data-level="8.2" data-path="nonlinear1.html"><a href="nonlinear1.html#kernels-and-reproducing-kernel-hilbert-spaces"><i class="fa fa-check"></i><b>8.2</b> Kernels and Reproducing Kernel Hilbert Spaces</a></li>
<li class="chapter" data-level="8.3" data-path="nonlinear1.html"><a href="nonlinear1.html#support-vector-machines"><i class="fa fa-check"></i><b>8.3</b> Support Vector Machines</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="nonlinearity2.html"><a href="nonlinearity2.html"><i class="fa fa-check"></i><b>9</b> Nonlinearity Part II</a>
<ul>
<li class="chapter" data-level="9.1" data-path="nonlinearity2.html"><a href="nonlinearity2.html#smoothing-as-local-averaging"><i class="fa fa-check"></i><b>9.1</b> Smoothing as Local Averaging</a></li>
<li class="chapter" data-level="9.2" data-path="nonlinearity2.html"><a href="nonlinearity2.html#nearest-neighbours"><i class="fa fa-check"></i><b>9.2</b> Nearest Neighbours</a></li>
<li class="chapter" data-level="9.3" data-path="nonlinearity2.html"><a href="nonlinearity2.html#decision-trees"><i class="fa fa-check"></i><b>9.3</b> Decision Trees</a></li>
<li class="chapter" data-level="9.4" data-path="nonlinearity2.html"><a href="nonlinearity2.html#summary-8"><i class="fa fa-check"></i><b>9.4</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="ensemble-models.html"><a href="ensemble-models.html"><i class="fa fa-check"></i><b>10</b> Ensemble Models</a>
<ul>
<li class="chapter" data-level="10.1" data-path="ensemble-models.html"><a href="ensemble-models.html#bagging"><i class="fa fa-check"></i><b>10.1</b> Bagging</a></li>
<li class="chapter" data-level="10.2" data-path="ensemble-models.html"><a href="ensemble-models.html#boosting"><i class="fa fa-check"></i><b>10.2</b> Boosting</a></li>
<li class="chapter" data-level="10.3" data-path="ensemble-models.html"><a href="ensemble-models.html#variable-importance"><i class="fa fa-check"></i><b>10.3</b> Variable Importance</a></li>
<li class="chapter" data-level="10.4" data-path="ensemble-models.html"><a href="ensemble-models.html#summary-9"><i class="fa fa-check"></i><b>10.4</b> Summary</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">MATH482: Statistical Learning</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="header">
<h1 class="title">MATH482: Statistical Learning</h1>
<p class="author"><em>David P. Hofmeyr</em></p>
</div>
<div id="introduction-to-r" class="section level1 hasAnchor" number="1">
<h1><span class="header-section-number">1</span> Introduction to R<a href="introduction-to-r.html#introduction-to-r" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>The purpose of this chapter is to provide you with a gentle introduction to R as an environment for working with and analysing data.</p>
<div id="background-on-r" class="section level2 hasAnchor" number="1.1">
<h2><span class="header-section-number">1.1</span> Background on R<a href="introduction-to-r.html#background-on-r" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>R is a free and open-source programming language for statistical computing and graphics. “Open-source” means that the code that was written to create the R environment is available free of charge for others to use and modify from its original design. Open-source software is typically thought of as a collaborative effort where people improve upon the source code and share the changes within the community so that other members can take advantage of their work, as well as help improve it further.</p>
<p>These features mean that R has become <em>the</em> most powerful and flexible domain-specific statistical programming language in the world. However, R’s statistics-specific nature also means that we should regard it as just one of the tools, albeit a powerful tool, in the toolbox available to the modern data scientist.</p>
</div>
<div id="getting-started-with-rstudio" class="section level2 hasAnchor" number="1.2">
<h2><span class="header-section-number">1.2</span> Getting started with RStudio<a href="introduction-to-r.html#getting-started-with-rstudio" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="installing-r-and-rstudio" class="section level3 hasAnchor" number="1.2.1">
<h3><span class="header-section-number">1.2.1</span> Installing R and RStudio<a href="introduction-to-r.html#installing-r-and-rstudio" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Versions of R are available for Windows, Macs and Linux. To download and install R visit the website <a href="http://www.r-project.org" class="uri">http://www.r-project.org</a>. You will also need RStudio (<a href="http://www.rstudio.com" class="uri">http://www.rstudio.com</a>).</p>
<p><strong>Note</strong>: If you are using one of the computers in the lab, both of these will already be installed.</p>
</div>
<div id="r-extensions" class="section level3 hasAnchor" number="1.2.2">
<h3><span class="header-section-number">1.2.2</span> R extensions<a href="introduction-to-r.html#r-extensions" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>R has a rich ecosystem of extensions (<em>packages</em>, more on that later) that cater for nearly every statistical situation you can think of. The main repository for R packages is <a href="https://cran.r-project.org/">CRAN (the Comprehensive R Archive Network)</a>.</p>
<ul>
<li>Many people also upload their code as packages to their own repositories, e.g. on github</li>
</ul>
</div>
<div id="saving-your-work-on-the-lancaster-windows-network" class="section level3 hasAnchor" number="1.2.3">
<h3><span class="header-section-number">1.2.3</span> Saving your work on the Lancaster Windows network<a href="introduction-to-r.html#saving-your-work-on-the-lancaster-windows-network" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>If you are using a university Windows computer or are remotely connected to a Windows virtual machine, start by finding your home folder (your H: drive). The H: drive will be made accessible to you no matter which university computer you use. Access it via <em>File Explorer &gt; This PC</em>. This is the best location to save all your files (reports, scripts, plots, data sets, and everything else).</p>
<ul>
<li><p><strong>do NOT save files to the local (C:) drive</strong> as they will probably not be there when you next login.</p></li>
<li><p>Also, ISS makes regular backups of your H: drive, so if you ever permanently delete a file they should be able to recover a previous version of it.</p></li>
</ul>
</div>
<div id="rstudio-and-the-console" class="section level3 hasAnchor" number="1.2.4">
<h3><span class="header-section-number">1.2.4</span> RStudio and the console<a href="introduction-to-r.html#rstudio-and-the-console" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Start by opening R Studio. R Studio tries to makes best use of the screen by splitting it up in to three panels:</p>
<p><img src="figures/rstudio-annotated.png" /></p>
<ul>
<li>An interactive R <strong>console</strong> (or <a href="https://en.wikipedia.org/wiki/Read%E2%80%93eval%E2%80%93print_loop">REPL</a>) – enter R statements manually at the prompt at the bottom (look for the <code>&gt;</code> symbol).</li>
<li>Environment – data structures stored in memory show up here, including things like data sets, plots, and models.</li>
<li>Stuff – a miscellaneous panel that has various uses, as you will see later. For now, click on the <strong>Plot</strong> tab. The panel should become blank (since we have not made any plots yet).</li>
</ul>
</div>
</div>
<div id="statements-expressions-and-objects" class="section level2 hasAnchor" number="1.3">
<h2><span class="header-section-number">1.3</span> Statements, expressions and objects<a href="introduction-to-r.html#statements-expressions-and-objects" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>We will begin by only using the <strong>console</strong> panel. In the console, we can type R <a href="https://en.wikipedia.org/wiki/Statement_(computer_science)">statements</a> and have them evaluated each time we hit <code>Enter</code>.</p>
<ul>
<li>Try entering a very simple statement: an <a href="https://en.wikipedia.org/wiki/Expression_(computer_science)">expression</a> that adds of two numbers. Type the following and press <code>Enter</code>.</li>
</ul>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="introduction-to-r.html#cb1-1" tabindex="-1"></a><span class="dv">4</span> <span class="sc">+</span> <span class="dv">5</span></span></code></pre></div>
<pre><code>## [1] 9</code></pre>
<ul>
<li><p>Pressing <code>Enter</code> instructs the console to <em>evaluate</em> the statement. And since our statement is an expression (i.e. statement that has a result), the result of evaluating the expression is printed back.</p>
<ul>
<li>The <code>[1]</code> refers to the fact that our expression evaluates to a single <em>object</em>, in this case a scalar taking the value 9.</li>
</ul></li>
</ul>
<table>
<caption>Basic maths operations in R.</caption>
<thead>
<tr class="header">
<th>Operation</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Add</td>
<td><code>2 + 3</code></td>
</tr>
<tr class="even">
<td>Subtract</td>
<td><code>2 - 3</code></td>
</tr>
<tr class="odd">
<td>Multiply</td>
<td><code>2 * 3</code></td>
</tr>
<tr class="even">
<td>Divide</td>
<td><code>2 / 3</code></td>
</tr>
<tr class="odd">
<td>Modulus</td>
<td><code>2 %% 3</code></td>
</tr>
<tr class="even">
<td>Square root</td>
<td><code>sqrt(2)</code></td>
</tr>
<tr class="odd">
<td>Power</td>
<td><code>2^3</code></td>
</tr>
<tr class="even">
<td>Cosine</td>
<td><code>cos(2 * pi)</code></td>
</tr>
<tr class="odd">
<td>Sine</td>
<td><code>sin(pi / 2)</code></td>
</tr>
<tr class="even">
<td>Tangent</td>
<td><code>tan(pi / 4)</code></td>
</tr>
<tr class="odd">
<td>Natural log</td>
<td><code>log(2)</code></td>
</tr>
<tr class="even">
<td>Expontential</td>
<td><code>exp(2)</code></td>
</tr>
</tbody>
</table>
<p>Using numbers of your own, try some other basic mathematical expressions listed below</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="introduction-to-r.html#cb3-1" tabindex="-1"></a><span class="dv">100</span> <span class="sc">-</span> <span class="dv">45</span></span>
<span id="cb3-2"><a href="introduction-to-r.html#cb3-2" tabindex="-1"></a><span class="dv">65</span> <span class="sc">*</span> <span class="dv">89</span></span>
<span id="cb3-3"><a href="introduction-to-r.html#cb3-3" tabindex="-1"></a><span class="dv">45</span> <span class="sc">/</span> <span class="sc">-</span><span class="dv">3</span></span>
<span id="cb3-4"><a href="introduction-to-r.html#cb3-4" tabindex="-1"></a><span class="dv">100</span> <span class="sc">%%</span> <span class="dv">9</span></span>
<span id="cb3-5"><a href="introduction-to-r.html#cb3-5" tabindex="-1"></a><span class="fu">sqrt</span>(<span class="dv">810</span>)</span>
<span id="cb3-6"><a href="introduction-to-r.html#cb3-6" tabindex="-1"></a><span class="dv">2</span><span class="sc">^</span><span class="dv">10</span></span></code></pre></div>
<p>Once you’re happy, try combining some of these expressions into more complicated expressions, for example:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="introduction-to-r.html#cb4-1" tabindex="-1"></a><span class="dv">3</span> <span class="sc">+</span> <span class="dv">7</span> <span class="sc">*</span> <span class="dv">5</span> <span class="sc">/</span> <span class="dv">3</span> <span class="sc">-</span> <span class="dv">2</span></span>
<span id="cb4-2"><a href="introduction-to-r.html#cb4-2" tabindex="-1"></a>(<span class="dv">3</span> <span class="sc">+</span> <span class="dv">7</span>) <span class="sc">*</span> <span class="dv">5</span> <span class="sc">/</span> (<span class="dv">3</span> <span class="sc">-</span> <span class="dv">2</span>)</span></code></pre></div>
<p>As with mathematics, <a href="https://rdrr.io/r/base/Syntax.html">R’s operator precedence</a> follows the BODMAS rule: Brackets, then Orders (powers, square roots), then Division, then Multiplication, then Addition, then Subtraction.</p>
<p>Brackets, then, are key to controlling the order of operations within an expression, for instance <span class="math display">\[
\frac{\sqrt{3/4}}{\frac{1}{3} - \frac{2}{\pi^2}}.
\]</span></p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="introduction-to-r.html#cb5-1" tabindex="-1"></a><span class="fu">sqrt</span>(<span class="dv">3</span> <span class="sc">/</span> <span class="dv">4</span>) <span class="sc">/</span> (<span class="dv">1</span> <span class="sc">/</span> <span class="dv">3</span> <span class="sc">-</span> <span class="dv">2</span> <span class="sc">/</span> pi<span class="sc">^</span><span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] 6.626513</code></pre>
<p>Combining expressions, as we did above, may become tedious, especially if we wish to re-use the same expression many times.</p>
<p>Better is to store the evaluation of such an expression in memory, so that we can use it later.</p>
<p>To store the result of evaluating an expression we assign them to <em>objects</em> using the <em>assignment</em> operator <code>&lt;-</code>.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb7-1"><a href="introduction-to-r.html#cb7-1"></a>apple  <span class="ot">&lt;-</span> <span class="dv">20</span> <span class="sc">-</span> <span class="dv">16</span></span>
<span id="cb7-2"><a href="introduction-to-r.html#cb7-2"></a>banana <span class="ot">&lt;-</span> <span class="dv">4</span> <span class="sc">+</span> <span class="dv">5</span></span>
<span id="cb7-3"><a href="introduction-to-r.html#cb7-3"></a>apple <span class="sc">-</span> banana</span></code></pre></div>
<pre><code>## [1] -5</code></pre>
<p>Lines 1 and 2 simply evaluate the expressions on the right of <code>&lt;-</code> and store the results in objects named <code>apple</code> and <code>banana</code> respectively. Line 3 is an expression statement, in which R substitutes the values of <code>apple</code> and <code>banana</code> into the expression <code>apple - banana</code> and evaluates it.</p>
<ul>
<li>If you look in the environment panel of RStudio, you should now see two objects listed. These objects are now part of our working environment. We can access their contents by entering their names into the console:</li>
</ul>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="introduction-to-r.html#cb9-1" tabindex="-1"></a>apple</span></code></pre></div>
<pre><code>## [1] 4</code></pre>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="introduction-to-r.html#cb11-1" tabindex="-1"></a>banana</span></code></pre></div>
<pre><code>## [1] 9</code></pre>
<p><strong>NB</strong>: R will not hesitate in overwriting an object if you try to assign its name to a new object (R does not issue a warning):</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="introduction-to-r.html#cb13-1" tabindex="-1"></a>apple <span class="ot">&lt;-</span> <span class="sc">-</span><span class="dv">100</span></span>
<span id="cb13-2"><a href="introduction-to-r.html#cb13-2" tabindex="-1"></a>apple</span></code></pre></div>
<pre><code>## [1] -100</code></pre>
<ul>
<li>We can also modify the value of an object by referencing itself:</li>
</ul>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="introduction-to-r.html#cb15-1" tabindex="-1"></a>apple <span class="ot">&lt;-</span> apple <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb15-2"><a href="introduction-to-r.html#cb15-2" tabindex="-1"></a>apple</span></code></pre></div>
<pre><code>## [1] -99</code></pre>
<p><strong>Note</strong>: it is possible to use the equals (<code>=</code>) sign instead of <code>&lt;-</code> in R, but it is preferable to stick with <code>&lt;-</code> for assignment statements.</p>
<ul>
<li>They are functionally different in certain contexts, but work exactly equivalently for assignments</li>
</ul>
<p>In the above we have only encountered numeric objects which by default are of type <code>double</code> (referring to the level of precision with which the computer is storing that number) and of class <code>numeric</code>, but there are very many other object types supported in R. For example, it is sometimes convenient to assign a value to an object which is some description of it. We can do this by writing this description in inverted commas, creating a <code>character</code> object, and assigning this to the object:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="introduction-to-r.html#cb17-1" tabindex="-1"></a>my_name <span class="ot">&lt;-</span> <span class="st">&quot;David&quot;</span></span>
<span id="cb17-2"><a href="introduction-to-r.html#cb17-2" tabindex="-1"></a>my_name</span></code></pre></div>
<pre><code>## [1] &quot;David&quot;</code></pre>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="introduction-to-r.html#cb19-1" tabindex="-1"></a><span class="fu">class</span>(my_name)</span></code></pre></div>
<pre><code>## [1] &quot;character&quot;</code></pre>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="introduction-to-r.html#cb21-1" tabindex="-1"></a><span class="fu">class</span>(<span class="dv">1</span>)</span></code></pre></div>
<pre><code>## [1] &quot;numeric&quot;</code></pre>
<p>Later on we will encounter <code>logical</code> objects, which form an integral component of computer programming as they allow us to perform operations only under certain conditions, thereby dictating the <em>flow</em> of our programme depending on, e.g. values taken by various objects during the entire process.</p>
<div id="vectors" class="section level3 hasAnchor" number="1.3.1">
<h3><span class="header-section-number">1.3.1</span> Vectors<a href="introduction-to-r.html#vectors" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>R has been optimised to work with vectors, and any time we can modify a piece of code to exploit this we can likely massively speed up the time it takes to run.</p>
<p>A vector is like a list of numbers, and can be created in R in a number of ways, most directly with the function <code>c()</code>, as in the following.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="introduction-to-r.html#cb23-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="sc">-</span><span class="dv">8</span>, <span class="dv">5</span>)</span>
<span id="cb23-2"><a href="introduction-to-r.html#cb23-2" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>## [1]  1  3 -8  5</code></pre>
<p>A lot of mathematical operations we looked at before also work for vectors</p>
<ul>
<li>applying one of the mathematical operators we saw before to a vector and a scalar (a single number) will <em>map</em> the resulting expression to each element in the vector:</li>
</ul>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="introduction-to-r.html#cb25-1" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb25-2"><a href="introduction-to-r.html#cb25-2" tabindex="-1"></a>x<span class="sc">+</span>y</span></code></pre></div>
<pre><code>## [1]  3  5 -6  7</code></pre>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="introduction-to-r.html#cb27-1" tabindex="-1"></a>x<span class="sc">*</span>y</span></code></pre></div>
<pre><code>## [1]   2   6 -16  10</code></pre>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="introduction-to-r.html#cb29-1" tabindex="-1"></a>x<span class="sc">/</span>y</span></code></pre></div>
<pre><code>## [1]  0.5  1.5 -4.0  2.5</code></pre>
<p>But what happens if <code>y</code> were a vector like <code>x</code>?</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="introduction-to-r.html#cb31-1" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">7</span>)</span>
<span id="cb31-2"><a href="introduction-to-r.html#cb31-2" tabindex="-1"></a></span>
<span id="cb31-3"><a href="introduction-to-r.html#cb31-3" tabindex="-1"></a>x <span class="sc">+</span> y</span></code></pre></div>
<pre><code>## [1]  2  4 -6 12</code></pre>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="introduction-to-r.html#cb33-1" tabindex="-1"></a>x<span class="sc">*</span>y</span></code></pre></div>
<pre><code>## [1]   1   3 -16  35</code></pre>
<p>You can see that R has applied the operator element-wise, i.e. the first element in <code>x</code> and the first element in <code>y</code>, the second element in <code>x</code> and the second element in <code>y</code>, etc.</p>
<ul>
<li><p><strong>Note</strong>: this works as desired when both <code>x</code> and <code>y</code> have the same length. However, R will still try to make the operation work even if they are not of the same length, by repeating the shorter vector as many times as needed. Still, to ensure things work as we want, it is prudent to try and only use same length vectors unless you’re perfectly confident in how R will work otherwise.</p></li>
<li><p>You can retrieve the length of a vector with the “length” function:</p></li>
</ul>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="introduction-to-r.html#cb35-1" tabindex="-1"></a><span class="fu">length</span>(x)</span></code></pre></div>
<pre><code>## [1] 4</code></pre>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="introduction-to-r.html#cb37-1" tabindex="-1"></a><span class="fu">length</span>(y)</span></code></pre></div>
<pre><code>## [1] 4</code></pre>
<p>Another way to create vectors with a regular structure is with the <code>seq()</code> function:</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="introduction-to-r.html#cb39-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">1</span>, <span class="at">to =</span> <span class="dv">10</span>, <span class="at">by =</span> <span class="dv">1</span>)</span>
<span id="cb39-2"><a href="introduction-to-r.html#cb39-2" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>##  [1]  1  2  3  4  5  6  7  8  9 10</code></pre>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="introduction-to-r.html#cb41-1" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">1</span>, <span class="at">to =</span> <span class="dv">10</span>, <span class="at">by =</span> <span class="dv">2</span>)</span>
<span id="cb41-2"><a href="introduction-to-r.html#cb41-2" tabindex="-1"></a>y</span></code></pre></div>
<pre><code>## [1] 1 3 5 7 9</code></pre>
<p>Instead of defining the gap between successive entries (the <code>by</code> argument above), we could equally decide the length of the vector we want out:</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="introduction-to-r.html#cb43-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">1</span>, <span class="at">to =</span> <span class="dv">10</span>, <span class="at">length =</span> <span class="dv">10</span>)</span>
<span id="cb43-2"><a href="introduction-to-r.html#cb43-2" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>##  [1]  1  2  3  4  5  6  7  8  9 10</code></pre>
<p>If we want simply to create a sequence of integers, we can also use the notation <code>from:to</code>:</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="introduction-to-r.html#cb45-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span></span>
<span id="cb45-2"><a href="introduction-to-r.html#cb45-2" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>##  [1]  1  2  3  4  5  6  7  8  9 10</code></pre>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="introduction-to-r.html#cb47-1" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="dv">6</span><span class="sc">:-</span><span class="dv">6</span></span>
<span id="cb47-2"><a href="introduction-to-r.html#cb47-2" tabindex="-1"></a>y</span></code></pre></div>
<pre><code>##  [1]  6  5  4  3  2  1  0 -1 -2 -3 -4 -5 -6</code></pre>
<p><strong>Indexing a Vector</strong></p>
<p>If we want to extract only some of the elements in a vector, we can use the syntax <code>vector[indices]</code>, where the indices inside <code>[]</code> is either an integer, telling R which entry in the vector to extract, or a vector of such integers:</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="introduction-to-r.html#cb49-1" tabindex="-1"></a>y[<span class="dv">1</span>]</span></code></pre></div>
<pre><code>## [1] 6</code></pre>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="introduction-to-r.html#cb51-1" tabindex="-1"></a>y[<span class="dv">3</span><span class="sc">:</span><span class="dv">7</span>]</span></code></pre></div>
<pre><code>## [1] 4 3 2 1 0</code></pre>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="introduction-to-r.html#cb53-1" tabindex="-1"></a>z <span class="ot">&lt;-</span> y[<span class="fu">c</span>(<span class="dv">8</span>, <span class="dv">1</span>)]</span>
<span id="cb53-2"><a href="introduction-to-r.html#cb53-2" tabindex="-1"></a>z</span></code></pre></div>
<pre><code>## [1] -1  6</code></pre>
<ul>
<li><strong>NB</strong>: The indices in a vector of length <code>L</code> in R are <code>1:L</code>, which is different from many other programming languages, which use zero as the first index</li>
</ul>
</div>
<div id="matrices-and-arrays" class="section level3 hasAnchor" number="1.3.2">
<h3><span class="header-section-number">1.3.2</span> Matrices and Arrays<a href="introduction-to-r.html#matrices-and-arrays" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>A matrix may be seen as a simple extension of a vector, and is a table of numbers; like stacking vectors next to one another in columns (or turning them sideways (transposing them) and stacking them on top of one another in rows). As with vectors, there are multiple ways in which we can create a matrix.</p>
<p>Two simple ways to construct a matrix are <em>column-binding</em> (with the function <code>cbind</code>) and <em>row-binding</em> (with the function <code>rbind</code>):</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="introduction-to-r.html#cb55-1" tabindex="-1"></a>m <span class="ot">&lt;-</span> <span class="fu">cbind</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="fu">seq</span>(<span class="sc">-</span><span class="dv">6</span>, <span class="dv">7</span>, <span class="at">length =</span> <span class="dv">5</span>))</span>
<span id="cb55-2"><a href="introduction-to-r.html#cb55-2" tabindex="-1"></a>m</span></code></pre></div>
<pre><code>##      [,1]  [,2]
## [1,]    1 -6.00
## [2,]    2 -2.75
## [3,]    3  0.50
## [4,]    4  3.75
## [5,]    5  7.00</code></pre>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="introduction-to-r.html#cb57-1" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">rbind</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="fu">c</span>(<span class="sc">-</span><span class="dv">8</span>, <span class="dv">1</span>, <span class="dv">19</span>))</span>
<span id="cb57-2"><a href="introduction-to-r.html#cb57-2" tabindex="-1"></a>p</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    2    3
## [2,]   -8    1   19</code></pre>
<p>Similar to how R will replicate a vector multiple times if we try to apply operators to two vectors of different length, R will try to bind vectors of different length:</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="introduction-to-r.html#cb59-1" tabindex="-1"></a>m <span class="ot">&lt;-</span> <span class="fu">cbind</span>(<span class="dv">1</span>, <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">8</span>, <span class="sc">-</span><span class="dv">1</span>))</span>
<span id="cb59-2"><a href="introduction-to-r.html#cb59-2" tabindex="-1"></a>m</span></code></pre></div>
<pre><code>##      [,1] [,2]
## [1,]    1    2
## [2,]    1    8
## [3,]    1   -1</code></pre>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="introduction-to-r.html#cb61-1" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">rbind</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>, <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="sc">-</span><span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>))</span>
<span id="cb61-2"><a href="introduction-to-r.html#cb61-2" tabindex="-1"></a>p</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3] [,4] [,5] [,6]
## [1,]    1    2    1    2    1    2
## [2,]    1    3   -3    5    6    7</code></pre>
<p>As an alternative we can create a matrix directly with the function <code>matrix(data, nrow, ncol)</code>. By default this function will take the entries in the vector <code>data</code> and fill the matrix column by column:</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="introduction-to-r.html#cb63-1" tabindex="-1"></a>m <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="dv">5</span>, <span class="dv">2</span>)</span>
<span id="cb63-2"><a href="introduction-to-r.html#cb63-2" tabindex="-1"></a>m</span></code></pre></div>
<pre><code>##      [,1] [,2]
## [1,]    1    6
## [2,]    2    7
## [3,]    3    8
## [4,]    4    9
## [5,]    5   10</code></pre>
<p>If we want R to instead fill the matrix row by row, we set the optional argument <code>byrow = TRUE</code>:</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="introduction-to-r.html#cb65-1" tabindex="-1"></a>m <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="dv">5</span>, <span class="dv">2</span>, <span class="at">byrow =</span> <span class="cn">TRUE</span>)</span>
<span id="cb65-2"><a href="introduction-to-r.html#cb65-2" tabindex="-1"></a>m</span></code></pre></div>
<pre><code>##      [,1] [,2]
## [1,]    1    2
## [2,]    3    4
## [3,]    5    6
## [4,]    7    8
## [5,]    9   10</code></pre>
<p>The transpose of a matrix is simply a “rotation” (although not in the algebraic sense) of the matrix, which swaps its rows and columns, and is obtained with the function <code>t()</code>:</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="introduction-to-r.html#cb67-1" tabindex="-1"></a><span class="fu">t</span>(m)</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3] [,4] [,5]
## [1,]    1    3    5    7    9
## [2,]    2    4    6    8   10</code></pre>
<p>When we start to use the algebra of vectors and matrices the transpose will become increasingly important</p>
<ul>
<li>Those on the MSc Statistics will be very well acquainted with matrix algebra by now, and those on the MSc Data Science, some of whom are not yet, will learn much more in the <em>Foundations of Data Science and AI</em> module</li>
</ul>
<p>The size of a matrix can be obtained using <code>dim()</code> which outputs the number of rows and the number of columns, or <code>nrow()</code> and <code>ncol()</code> which output the number of rows and columns respectively:</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="introduction-to-r.html#cb69-1" tabindex="-1"></a><span class="fu">dim</span>(m)</span></code></pre></div>
<pre><code>## [1] 5 2</code></pre>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="introduction-to-r.html#cb71-1" tabindex="-1"></a><span class="fu">nrow</span>(m)</span></code></pre></div>
<pre><code>## [1] 5</code></pre>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="introduction-to-r.html#cb73-1" tabindex="-1"></a><span class="fu">ncol</span>(m)</span></code></pre></div>
<pre><code>## [1] 2</code></pre>
<p>Arrays follow the same ideas as vectors and matrices, but are more general in that they have an arbitrary number of dimensions. For example, an array with only one dimension is a vector, and one with two dimensions is a matrix. We will not be working much with arrays having more than two dimensions.</p>
<p><strong>Indexing Matrices</strong></p>
<p>The same indexing rules as we had for vectors applies for matrices, except now we need to specify which rows <em>and</em> which columns we want to extract. As before we use the square brackets <code>[]</code> to specify the indices we want, and we now separate the row and column indices by a comma:</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="introduction-to-r.html#cb75-1" tabindex="-1"></a>m <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">30</span>, <span class="dv">6</span>, <span class="dv">5</span>)</span>
<span id="cb75-2"><a href="introduction-to-r.html#cb75-2" tabindex="-1"></a>m</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3] [,4] [,5]
## [1,]    1    7   13   19   25
## [2,]    2    8   14   20   26
## [3,]    3    9   15   21   27
## [4,]    4   10   16   22   28
## [5,]    5   11   17   23   29
## [6,]    6   12   18   24   30</code></pre>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="introduction-to-r.html#cb77-1" tabindex="-1"></a>m[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>,<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">4</span>)]</span></code></pre></div>
<pre><code>##      [,1] [,2]
## [1,]    1   19
## [2,]    2   20
## [3,]    3   21</code></pre>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="introduction-to-r.html#cb79-1" tabindex="-1"></a>m[<span class="dv">4</span>,<span class="dv">3</span>]</span></code></pre></div>
<pre><code>## [1] 16</code></pre>
<p>If we want all columns (or all rows) we simply leave the corresponding field empty:</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="introduction-to-r.html#cb81-1" tabindex="-1"></a>m[<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>,]</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3] [,4] [,5]
## [1,]    1    7   13   19   25
## [2,]    2    8   14   20   26</code></pre>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="introduction-to-r.html#cb83-1" tabindex="-1"></a>m[,<span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">5</span>)]</span></code></pre></div>
<pre><code>##      [,1] [,2]
## [1,]   13   25
## [2,]   14   26
## [3,]   15   27
## [4,]   16   28
## [5,]   17   29
## [6,]   18   30</code></pre>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="introduction-to-r.html#cb85-1" tabindex="-1"></a>m[,]</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3] [,4] [,5]
## [1,]    1    7   13   19   25
## [2,]    2    8   14   20   26
## [3,]    3    9   15   21   27
## [4,]    4   10   16   22   28
## [5,]    5   11   17   23   29
## [6,]    6   12   18   24   30</code></pre>
</div>
<div id="lists" class="section level3 hasAnchor" number="1.3.3">
<h3><span class="header-section-number">1.3.3</span> Lists<a href="introduction-to-r.html#lists" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Vectors/matrices/arrays will only allow one to store contents which have the same object type. In fact, if you try to combine objects of different types R will <code>coerce</code> some of them into different types so that they can be stored together. For example</p>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="introduction-to-r.html#cb87-1" tabindex="-1"></a>my_name <span class="ot">&lt;-</span> <span class="st">&quot;David&quot;</span></span>
<span id="cb87-2"><a href="introduction-to-r.html#cb87-2" tabindex="-1"></a>my_height <span class="ot">&lt;-</span> <span class="dv">190</span></span>
<span id="cb87-3"><a href="introduction-to-r.html#cb87-3" tabindex="-1"></a></span>
<span id="cb87-4"><a href="introduction-to-r.html#cb87-4" tabindex="-1"></a><span class="fu">class</span>(my_name)</span></code></pre></div>
<pre><code>## [1] &quot;character&quot;</code></pre>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb89-1"><a href="introduction-to-r.html#cb89-1" tabindex="-1"></a><span class="fu">class</span>(my_height)</span></code></pre></div>
<pre><code>## [1] &quot;numeric&quot;</code></pre>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb91-1"><a href="introduction-to-r.html#cb91-1" tabindex="-1"></a><span class="fu">c</span>(my_name, my_height)</span></code></pre></div>
<pre><code>## [1] &quot;David&quot; &quot;190&quot;</code></pre>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="introduction-to-r.html#cb93-1" tabindex="-1"></a><span class="fu">class</span>(<span class="fu">c</span>(my_name, my_height))</span></code></pre></div>
<pre><code>## [1] &quot;character&quot;</code></pre>
<p>Since it is not clear how to turn the character object <code>"David"</code> into a numeric object, but it is comparatively clear how to convert the numeric <code>190</code> into a character, R “coerces” the object <code>my_height</code> into a character so that it can store them together.</p>
<p><strong>Lists</strong> are an alternative way of storing multiple objects, but unlike vectors, matrices, arrays, etc. they don’t have a rigid structure. For example, we can create a list containing a numeric object, a vector of character objects and an entire other list.</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb95-1"><a href="introduction-to-r.html#cb95-1" tabindex="-1"></a>my_list <span class="ot">&lt;-</span> <span class="fu">list</span>(my_height, <span class="fu">c</span>(my_name, <span class="st">&quot;boo&quot;</span>), <span class="fu">list</span>(<span class="dv">1</span>))</span>
<span id="cb95-2"><a href="introduction-to-r.html#cb95-2" tabindex="-1"></a>my_list</span></code></pre></div>
<pre><code>## [[1]]
## [1] 190
## 
## [[2]]
## [1] &quot;David&quot; &quot;boo&quot;  
## 
## [[3]]
## [[3]][[1]]
## [1] 1</code></pre>
<p>When printing a list R hints at how we can extract individual <code>fields</code>, i.e. with the use of double brackets <code>[[]]</code>:</p>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb97-1"><a href="introduction-to-r.html#cb97-1" tabindex="-1"></a>my_list[[<span class="dv">2</span>]]</span></code></pre></div>
<pre><code>## [1] &quot;David&quot; &quot;boo&quot;</code></pre>
<p>Note that there is a clear distinction between <code>list[[index]]</code> and <code>list[index]</code> where the former will extract the indexed object itself from the list, whereas the latter is a “sub-list” containing only the indexed object.</p>
<p>However, lists also provide a more appropriate means of storing and extracting their contents. The object <code>my_list</code> above is an “un-named” list since we didn’t give names to the different fields. We can either name the fields in a list after creating it or we can name them when we initially create it. When we want to isolate a particular field by name we use the “dollar sign”, i.e. <code>list$fieldname</code>.</p>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb99-1"><a href="introduction-to-r.html#cb99-1" tabindex="-1"></a><span class="fu">names</span>(my_list) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;my_height&quot;</span>, <span class="st">&quot;name_and_boo&quot;</span>, <span class="st">&quot;another_list&quot;</span>)</span>
<span id="cb99-2"><a href="introduction-to-r.html#cb99-2" tabindex="-1"></a><span class="fu">names</span>(my_list)</span></code></pre></div>
<pre><code>## [1] &quot;my_height&quot;    &quot;name_and_boo&quot; &quot;another_list&quot;</code></pre>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb101-1"><a href="introduction-to-r.html#cb101-1" tabindex="-1"></a>my_list<span class="sc">$</span>another_list</span></code></pre></div>
<pre><code>## [[1]]
## [1] 1</code></pre>
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb103-1"><a href="introduction-to-r.html#cb103-1" tabindex="-1"></a>my_list_2 <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb103-2"><a href="introduction-to-r.html#cb103-2" tabindex="-1"></a>  <span class="at">name =</span> <span class="st">&quot;David&quot;</span>,</span>
<span id="cb103-3"><a href="introduction-to-r.html#cb103-3" tabindex="-1"></a>  <span class="at">height =</span> <span class="dv">190</span>,</span>
<span id="cb103-4"><a href="introduction-to-r.html#cb103-4" tabindex="-1"></a>  <span class="at">birth_place =</span> <span class="fu">list</span>(<span class="at">Country =</span> <span class="st">&quot;South Africa&quot;</span>,</span>
<span id="cb103-5"><a href="introduction-to-r.html#cb103-5" tabindex="-1"></a>                     <span class="at">City =</span> <span class="st">&quot;Johannesburg&quot;</span>)</span>
<span id="cb103-6"><a href="introduction-to-r.html#cb103-6" tabindex="-1"></a>)</span>
<span id="cb103-7"><a href="introduction-to-r.html#cb103-7" tabindex="-1"></a></span>
<span id="cb103-8"><a href="introduction-to-r.html#cb103-8" tabindex="-1"></a>my_list_2<span class="sc">$</span>name</span></code></pre></div>
<pre><code>## [1] &quot;David&quot;</code></pre>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb105-1"><a href="introduction-to-r.html#cb105-1" tabindex="-1"></a>my_list_2<span class="sc">$</span>birth_place</span></code></pre></div>
<pre><code>## $Country
## [1] &quot;South Africa&quot;
## 
## $City
## [1] &quot;Johannesburg&quot;</code></pre>
<p>We will work a lot in this module with special types of lists called a <em>data frames</em>.</p>
</div>
<div id="summary" class="section level3 hasAnchor" number="1.3.4">
<h3><span class="header-section-number">1.3.4</span> Summary<a href="introduction-to-r.html#summary" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>There is a priority of operations in arithmetic statements in R: raising to a power (<code>^</code>), multiplication and division (<code>*</code> and <code>/</code>), addition and subtraction (<code>+</code> and <code>-</code>). Operations are performed left to right, and priorities are overridden by parentheses.</li>
</ul>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb107-1"><a href="introduction-to-r.html#cb107-1" tabindex="-1"></a><span class="dv">6</span> <span class="sc">*</span> (<span class="dv">5</span> <span class="sc">+</span> <span class="dv">2</span>)<span class="sc">^</span><span class="dv">2</span> <span class="sc">/</span> (<span class="dv">2</span> <span class="sc">+</span> <span class="dv">6</span> <span class="sc">-</span> <span class="dv">9</span>) <span class="sc">/</span> <span class="dv">7</span> <span class="sc">*</span> <span class="dv">2</span></span></code></pre></div>
<pre><code>## [1] -84</code></pre>
<ul>
<li>Results can be stored in objects using the assignment statement: <code>&lt;-</code>. Object names are case sensitive. Type the name into the console and R will print the contents.</li>
</ul>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb109-1"><a href="introduction-to-r.html#cb109-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">0</span><span class="sc">:</span><span class="dv">10</span></span>
<span id="cb109-2"><a href="introduction-to-r.html#cb109-2" tabindex="-1"></a>y <span class="ot">&lt;-</span> x<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb109-3"><a href="introduction-to-r.html#cb109-3" tabindex="-1"></a>y</span></code></pre></div>
<pre><code>##  [1]   0   1   4   9  16  25  36  49  64  81 100</code></pre>
<ul>
<li>Vectors (and matrices) are lists of numbers with special mapping properties. To create a vector of numbers in the console, we use, <code>c()</code>, the combine function. Arithmetic operations work on vectors with the same priorities as single numbers. Use <code>seq()</code> to create a vector containing a specific number sequence, the parameters; <code>by</code> and <code>length</code> can be used to control the sequence.</li>
</ul>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb111-1"><a href="introduction-to-r.html#cb111-1" tabindex="-1"></a>days_long <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>)</span>
<span id="cb111-2"><a href="introduction-to-r.html#cb111-2" tabindex="-1"></a>days_quick <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">7</span></span>
<span id="cb111-3"><a href="introduction-to-r.html#cb111-3" tabindex="-1"></a>half_days <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">1</span>, <span class="dv">7</span>, <span class="at">by =</span> <span class="fl">0.5</span>)</span>
<span id="cb111-4"><a href="introduction-to-r.html#cb111-4" tabindex="-1"></a>days_long <span class="sc">+</span> <span class="fl">0.5</span></span></code></pre></div>
<pre><code>## [1] 1.5 2.5 3.5 4.5 5.5 6.5 7.5</code></pre>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb113-1"><a href="introduction-to-r.html#cb113-1" tabindex="-1"></a><span class="dv">2</span> <span class="sc">*</span> half_days</span></code></pre></div>
<pre><code>##  [1]  2  3  4  5  6  7  8  9 10 11 12 13 14</code></pre>
<div class="sourceCode" id="cb115"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb115-1"><a href="introduction-to-r.html#cb115-1" tabindex="-1"></a><span class="fu">c</span>(days_long, days_quick)</span></code></pre></div>
<pre><code>##  [1] 1 2 3 4 5 6 7 1 2 3 4 5 6 7</code></pre>
<ul>
<li>You can extract selected indices from a vector (or matrix) using the syntax <code>vector[indices]</code> (or <code>matrix[row_indices,column_indices]</code>)</li>
</ul>
<div class="sourceCode" id="cb117"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb117-1"><a href="introduction-to-r.html#cb117-1" tabindex="-1"></a>days_long[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>]</span></code></pre></div>
<pre><code>## [1] 1 2 3</code></pre>
<ul>
<li>Lists provide a more dynamic means of storing objects as they do not have a rigid dimension nor are they restricted to containing objects of the same type. We can name the <em>fields</em> in a list and extract them by name using the “dollar sign” syntax. We can also add fields after creating a list.</li>
</ul>
<div class="sourceCode" id="cb119"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb119-1"><a href="introduction-to-r.html#cb119-1" tabindex="-1"></a>my_new_list <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">to_do =</span> <span class="fu">list</span>(<span class="at">item1 =</span> <span class="st">&quot;finish this list&quot;</span>))</span>
<span id="cb119-2"><a href="introduction-to-r.html#cb119-2" tabindex="-1"></a></span>
<span id="cb119-3"><a href="introduction-to-r.html#cb119-3" tabindex="-1"></a>my_new_list<span class="sc">$</span>completed <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">item1 =</span> <span class="st">&quot;First section of Intro to R&quot;</span>)</span>
<span id="cb119-4"><a href="introduction-to-r.html#cb119-4" tabindex="-1"></a></span>
<span id="cb119-5"><a href="introduction-to-r.html#cb119-5" tabindex="-1"></a>my_new_list<span class="sc">$</span>to_do<span class="sc">$</span>item2 <span class="ot">&lt;-</span> <span class="st">&quot;Second section of Intro to R&quot;</span></span>
<span id="cb119-6"><a href="introduction-to-r.html#cb119-6" tabindex="-1"></a></span>
<span id="cb119-7"><a href="introduction-to-r.html#cb119-7" tabindex="-1"></a>my_new_list</span></code></pre></div>
<pre><code>## $to_do
## $to_do$item1
## [1] &quot;finish this list&quot;
## 
## $to_do$item2
## [1] &quot;Second section of Intro to R&quot;
## 
## 
## $completed
## $completed$item1
## [1] &quot;First section of Intro to R&quot;</code></pre>
</div>
</div>
<div id="basic-plots" class="section level2 hasAnchor" number="1.4">
<h2><span class="header-section-number">1.4</span> Basic plots<a href="introduction-to-r.html#basic-plots" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><em>Visualisation</em> is an extremely powerful and efficient way of communicating information. As statisticians and data-scientists we often rely on visualisations of data, or of the outputs of our statistical models, in order to use these to make effective decisions.</p>
<p>The <code>plot()</code> function in R is a versatile tool for producing these visualisations</p>
<ul>
<li>There are a number of other general purpose plotting options, but for this module we will only use the basic plotting functionality</li>
<li>For those who are interested the <code>ggplot</code> package and its derivatives have become very popular, and use a modular approach for producing visualisations</li>
</ul>
<p>The way in which <code>plot()</code> produces a graphic depends on the type of arguments given to it. For example, if we try to plot a vector we will see the values in the vector along the vertical axis, and the positions of these values will be equally spaced on the horizontal axis:</p>
<div class="sourceCode" id="cb121"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb121-1"><a href="introduction-to-r.html#cb121-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">7</span>, <span class="sc">-</span><span class="dv">2</span>, <span class="dv">9</span>, <span class="dv">5</span>, <span class="dv">2</span>)</span>
<span id="cb121-2"><a href="introduction-to-r.html#cb121-2" tabindex="-1"></a><span class="fu">plot</span>(x)</span></code></pre></div>
<p><img src="figures/unnamed-chunk-38-1.png" width="576" style="display: block; margin: auto;" /></p>
<p>If we wish to see the relationship between two vectors of equal length, we can provide both as arguments to <code>plot()</code>. Values of the first will be plotted against the horizontal axis and the corresponding values of the second along the vertical axis:</p>
<div class="sourceCode" id="cb122"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb122-1"><a href="introduction-to-r.html#cb122-1" tabindex="-1"></a>y <span class="ot">&lt;-</span> x<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb122-2"><a href="introduction-to-r.html#cb122-2" tabindex="-1"></a><span class="fu">plot</span>(x, y)</span></code></pre></div>
<p><img src="figures/unnamed-chunk-39-1.png" width="576" style="display: block; margin: auto;" /></p>
<p>By default we see this relationship via a set of points in the <span class="math inline">\((x,y)\)</span> plane, but we can also plot the graph of these as we would draw a function by using the argument <code>type = 'l'</code> (<code>l</code> for line). However, note that R will try to connect the points to form this graph in the order they appear.</p>
<div class="sourceCode" id="cb123"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb123-1"><a href="introduction-to-r.html#cb123-1" tabindex="-1"></a><span class="fu">plot</span>(x, y, <span class="at">type =</span> <span class="st">&#39;l&#39;</span>)</span></code></pre></div>
<p><img src="figures/unnamed-chunk-40-1.png" width="576" style="display: block; margin: auto;" /></p>
<p>To “correct” this behaviour we should provide <code>x</code> in either increasing or decreasing order (and re-order the elements in <code>y</code> appropriately):</p>
<div class="sourceCode" id="cb124"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb124-1"><a href="introduction-to-r.html#cb124-1" tabindex="-1"></a>x_sorted <span class="ot">&lt;-</span> <span class="fu">sort</span>(x)</span>
<span id="cb124-2"><a href="introduction-to-r.html#cb124-2" tabindex="-1"></a>y_sorted <span class="ot">&lt;-</span> x_sorted<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb124-3"><a href="introduction-to-r.html#cb124-3" tabindex="-1"></a><span class="fu">plot</span>(x_sorted, y_sorted, <span class="at">type =</span> <span class="st">&#39;l&#39;</span>)</span></code></pre></div>
<p><img src="figures/unnamed-chunk-41-1.png" width="576" style="display: block; margin: auto;" /></p>
<p>We could also do this by finding the ordering of the indices in <code>x</code> which leads to them being sorted:</p>
<div class="sourceCode" id="cb125"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb125-1"><a href="introduction-to-r.html#cb125-1" tabindex="-1"></a>ord <span class="ot">&lt;-</span> <span class="fu">order</span>(x)</span>
<span id="cb125-2"><a href="introduction-to-r.html#cb125-2" tabindex="-1"></a><span class="fu">plot</span>(x[ord], y[ord], <span class="at">type =</span> <span class="st">&#39;l&#39;</span>)</span></code></pre></div>
<p><img src="figures/unnamed-chunk-42-1.png" width="576" style="display: block; margin: auto;" /></p>
<div id="example-gravitational-force" class="section level3 hasAnchor" number="1.4.1">
<h3><span class="header-section-number">1.4.1</span> Example: Gravitational Force<a href="introduction-to-r.html#example-gravitational-force" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Newton’s law of gravitation tells us that the acceleration due to the gravitational force exerted by an object is determined by the equation <span class="math display">\[
a = G \frac{M}{r^2} \ m.s^{-2},
\]</span> where <span class="math inline">\(G \approx 6.6728 \times 10^{-11}\)</span> is the gravitational constant, <span class="math inline">\(M\)</span> is the mass of the object and <span class="math inline">\(r\)</span> is the distance from its centre of gravity.</p>
<p>This means that gravity at the surface of Earth (which weighs approximately <span class="math inline">\(5.9736 \times 10^{24} \ kg\)</span> and has an average radius of approximately <span class="math inline">\(6.37 \times 10^6 \ m\)</span>) is approximately equal to <span class="math inline">\(\frac{6.6728 \times 5.9736}{6.37^2} \times 10^{-11+24-12} \approx 9.82 \ m.s^{-2}\)</span>.</p>
<p>But what if we were to shift higher and higher above the surface of the earth, say by a distance of <span class="math inline">\(d\)</span> metres? First let’s set up what is fixed (our constants):</p>
<div class="sourceCode" id="cb126"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb126-1"><a href="introduction-to-r.html#cb126-1" tabindex="-1"></a>G <span class="ot">&lt;-</span> <span class="fl">6.6728</span> <span class="sc">*</span> <span class="dv">10</span><span class="sc">^</span>(<span class="sc">-</span><span class="dv">11</span>)</span>
<span id="cb126-2"><a href="introduction-to-r.html#cb126-2" tabindex="-1"></a>M_earth <span class="ot">&lt;-</span> <span class="fl">5.9736</span> <span class="sc">*</span> <span class="dv">10</span><span class="sc">^</span><span class="dv">24</span></span>
<span id="cb126-3"><a href="introduction-to-r.html#cb126-3" tabindex="-1"></a>r_earth <span class="ot">&lt;-</span> <span class="fl">6.37</span> <span class="sc">*</span> <span class="dv">10</span><span class="sc">^</span><span class="dv">6</span></span></code></pre></div>
<p>Then let’s consider distances up to the distance from Earth to the moon (approximately <span class="math inline">\(3.844\times 10^8 \ m\)</span>)</p>
<div class="sourceCode" id="cb127"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb127-1"><a href="introduction-to-r.html#cb127-1" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="fl">3.844</span><span class="sc">*</span><span class="dv">10</span><span class="sc">^</span><span class="dv">8</span>, <span class="at">length =</span> <span class="dv">1000</span>)</span>
<span id="cb127-2"><a href="introduction-to-r.html#cb127-2" tabindex="-1"></a><span class="fu">plot</span>(d, G<span class="sc">*</span>M_earth<span class="sc">/</span>(r_earth<span class="sc">+</span>d)<span class="sc">^</span><span class="dv">2</span>, <span class="at">ylab =</span> <span class="st">&#39;Acceleration&#39;</span>, <span class="at">xlab =</span> <span class="st">&#39;Distance above surface of Earth&#39;</span>, <span class="at">type =</span> <span class="st">&#39;l&#39;</span>)</span></code></pre></div>
<p><img src="figures/unnamed-chunk-44-1.png" width="576" style="display: block; margin: auto;" /></p>
<p>We can see that as <span class="math inline">\(d\)</span> increases the force quickly decreases towards zero (according to an <em>inverse square law</em>). Without a sense of the scale of <span class="math inline">\(d\)</span>, however, it may be unclear how to interpret this in a realistic sense. We can add vertical or horizontal lines to a plot using the function <code>abline(v = )</code> or <code>abline(h = )</code>. For example, let’s add a vertical line indicating the height at which GPS satellites orbit, approximately <span class="math inline">\(20 200 \ km = 2.02 \times 10^7 \ m\)</span>:</p>
<div class="sourceCode" id="cb128"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb128-1"><a href="introduction-to-r.html#cb128-1" tabindex="-1"></a><span class="fu">plot</span>(d, G<span class="sc">*</span>M_earth<span class="sc">/</span>(r_earth<span class="sc">+</span>d)<span class="sc">^</span><span class="dv">2</span>, <span class="at">ylab =</span> <span class="st">&#39;Acceleration&#39;</span>,</span>
<span id="cb128-2"><a href="introduction-to-r.html#cb128-2" tabindex="-1"></a>     <span class="at">xlab =</span> <span class="st">&#39;Distance above surface of Earth&#39;</span>, <span class="at">type =</span> <span class="st">&#39;l&#39;</span>)</span>
<span id="cb128-3"><a href="introduction-to-r.html#cb128-3" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">v =</span> <span class="fl">2.02</span><span class="sc">*</span><span class="dv">10</span><span class="sc">^</span><span class="dv">7</span>, <span class="at">lty =</span> <span class="dv">2</span>)</span></code></pre></div>
<p><img src="figures/unnamed-chunk-45-1.png" width="576" style="display: block; margin: auto;" /></p>
<p>We can add more interesting lines to a plot using the function <code>lines()</code>, which behaves similar to <code>plot(, type = 'l')</code> but adds the line to an existing plot rather than creating a new one.</p>
<ul>
<li>The function <code>points()</code> can also be used, and behaves almost exactly as <code>plot()</code> only adding its data to an existing plot rather than creating a new one. Specifically, <code>points(, type = 'l')</code> and <code>lines()</code> are functionally equivalent.</li>
</ul>
<p>Let’s add a line showing acceleration due to the moon’s gravity, if we consider that the vertical trajectory as we move above the surface of Earth is directly in the direction of the moon. At a distance <span class="math inline">\(d\)</span> metres above the surface of Earth they will be <span class="math inline">\(3.844\times 10^8 - d\)</span> metres above the surface of the moon. Incorporating the mass and radius of the moon, we have:</p>
<div class="sourceCode" id="cb129"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb129-1"><a href="introduction-to-r.html#cb129-1" tabindex="-1"></a>M_moon <span class="ot">&lt;-</span> <span class="fl">7.346</span> <span class="sc">*</span> <span class="dv">10</span><span class="sc">^</span><span class="dv">22</span></span>
<span id="cb129-2"><a href="introduction-to-r.html#cb129-2" tabindex="-1"></a>r_moon <span class="ot">&lt;-</span> <span class="fl">1.737</span> <span class="sc">*</span> <span class="dv">10</span><span class="sc">^</span><span class="dv">6</span></span>
<span id="cb129-3"><a href="introduction-to-r.html#cb129-3" tabindex="-1"></a>d_moon_to_earth <span class="ot">&lt;-</span> <span class="fl">3.844</span><span class="sc">*</span><span class="dv">10</span><span class="sc">^</span><span class="dv">8</span></span>
<span id="cb129-4"><a href="introduction-to-r.html#cb129-4" tabindex="-1"></a><span class="fu">plot</span>(d, G<span class="sc">*</span>M_earth<span class="sc">/</span>(r_earth<span class="sc">+</span>d)<span class="sc">^</span><span class="dv">2</span>, <span class="at">ylab =</span> <span class="st">&#39;Acceleration&#39;</span>, <span class="at">xlab =</span> <span class="st">&#39;Distance above surface of Earth&#39;</span>, <span class="at">type =</span> <span class="st">&#39;l&#39;</span>)</span>
<span id="cb129-5"><a href="introduction-to-r.html#cb129-5" tabindex="-1"></a><span class="fu">lines</span>(d, G<span class="sc">*</span>M_moon<span class="sc">/</span>(r_moon <span class="sc">+</span> (d_moon_to_earth<span class="sc">-</span>d))<span class="sc">^</span><span class="dv">2</span>, <span class="at">col =</span> <span class="dv">2</span>)</span></code></pre></div>
<p><img src="figures/unnamed-chunk-46-1.png" width="576" style="display: block; margin: auto;" /></p>
<ul>
<li>Try modifying the above by replacing the call to the function <code>lines()</code> with one using the function <code>points()</code>.</li>
</ul>
<p>For most of this trajectory the force from both bodies is very small relative to the gravitational force experienced at the surface of either of them (of course these forces also operate in opposite directions). Gravity on the surface of the moon is much less than on Earth, by roughly 6 times:</p>
<div class="sourceCode" id="cb130"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb130-1"><a href="introduction-to-r.html#cb130-1" tabindex="-1"></a>a_earth <span class="ot">&lt;-</span> G<span class="sc">*</span>M_earth<span class="sc">/</span>r_earth<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb130-2"><a href="introduction-to-r.html#cb130-2" tabindex="-1"></a>a_moon <span class="ot">&lt;-</span> G<span class="sc">*</span>M_moon<span class="sc">/</span>r_moon<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb130-3"><a href="introduction-to-r.html#cb130-3" tabindex="-1"></a>a_earth<span class="sc">/</span>a_moon</span></code></pre></div>
<pre><code>## [1] 6.046527</code></pre>
</div>
<div id="summary-1" class="section level3 hasAnchor" number="1.4.2">
<h3><span class="header-section-number">1.4.2</span> Summary<a href="introduction-to-r.html#summary-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>The <code>plot()</code> function produces a plot of <span class="math inline">\((x, y)\)</span> points using two vectors. Whether points are used or a line is draw is determined by the <code>type</code> parameter (<code>type = "l"</code> for lines, or <code>type = "p"</code> for points). The <code>points()</code> function has the same parameters as <code>plot()</code> but will add it’s data to an existing plot, rather than create a new one.</li>
</ul>
<div class="sourceCode" id="cb132"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb132-1"><a href="introduction-to-r.html#cb132-1" tabindex="-1"></a>r <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">1000</span></span>
<span id="cb132-2"><a href="introduction-to-r.html#cb132-2" tabindex="-1"></a>g <span class="ot">&lt;-</span> <span class="dv">1</span> <span class="sc">/</span> r<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb132-3"><a href="introduction-to-r.html#cb132-3" tabindex="-1"></a><span class="fu">plot</span>(<span class="at">x =</span> r, <span class="at">y =</span> g, <span class="at">type =</span> <span class="st">&quot;l&quot;</span>, <span class="at">col =</span> <span class="st">&quot;red&quot;</span>)</span>
<span id="cb132-4"><a href="introduction-to-r.html#cb132-4" tabindex="-1"></a>h <span class="ot">&lt;-</span> g <span class="sc">*</span> <span class="dv">2</span></span>
<span id="cb132-5"><a href="introduction-to-r.html#cb132-5" tabindex="-1"></a><span class="fu">points</span>(<span class="at">x =</span> r, <span class="at">y =</span> h, <span class="at">type =</span> <span class="st">&quot;p&quot;</span>, <span class="at">col =</span> <span class="st">&quot;blue&quot;</span>)</span></code></pre></div>
<p><img src="figures/unnamed-chunk-48-1.png" width="576" style="display: block; margin: auto;" /></p>
<ul>
<li>The function <code>abline</code> can be used to add a straight line to a plot, either providing arguments <code>a</code> and <code>b</code> for the intercept and slop, or one of <code>v</code> for a vertical line or <code>h</code> for a horizontal line</li>
</ul>
<div class="sourceCode" id="cb133"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb133-1"><a href="introduction-to-r.html#cb133-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">100</span></span>
<span id="cb133-2"><a href="introduction-to-r.html#cb133-2" tabindex="-1"></a>y <span class="ot">&lt;-</span> x <span class="sc">+</span> <span class="fu">sin</span>(x)</span>
<span id="cb133-3"><a href="introduction-to-r.html#cb133-3" tabindex="-1"></a><span class="fu">plot</span>(x, y)</span>
<span id="cb133-4"><a href="introduction-to-r.html#cb133-4" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">a =</span> <span class="dv">0</span>, <span class="at">b =</span> <span class="dv">1</span>, <span class="at">col =</span> <span class="dv">2</span>)</span></code></pre></div>
<p><img src="figures/unnamed-chunk-49-1.png" width="576" style="display: block; margin: auto;" /></p>
</div>
<div id="exercises" class="section level3 hasAnchor" number="1.4.3">
<h3><span class="header-section-number">1.4.3</span> Exercises<a href="introduction-to-r.html#exercises" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The exercises that follow can be carried out using the techniques and functions you have learned so far. Expect to make some mistakes. But if you start to get annoyed either take a break or ask for help.</p>
<ol style="list-style-type: decimal">
<li>Evaluate the following expressions:
<ol style="list-style-type: lower-alpha">
<li><span class="math inline">\(\frac{49^2 - 542}{42 + 63^2}\)</span></li>
<li><span class="math inline">\(a^2\)</span> for <span class="math inline">\(a = 1, 2, \ldots, 10\)</span></li>
</ol></li>
<li>Create plots for different powers of <span class="math inline">\(x\)</span>:
<ol style="list-style-type: lower-alpha">
<li>Create a vector, <span class="math inline">\(x\)</span>, which goes from -100 up to 100.</li>
<li>Create a new plot showing <span class="math inline">\(y = x^2\)</span>.</li>
<li>Add a red line to the existing plot showing <span class="math inline">\(y = x^4\)</span>.</li>
</ol></li>
</ol>
</div>
</div>
<div id="r-scripts" class="section level2 hasAnchor" number="1.5">
<h2><span class="header-section-number">1.5</span> R scripts<a href="introduction-to-r.html#r-scripts" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Some of you may start to be feeling at least slightly frustrated having to type commands line by line in to the console panel. Particularly, if you are like me and you often make mistakes, meaning that you have to re-enter the whole line.</p>
<p>So far we have only written fairly short statements, and typically these have not depended on one another to a large extent. However, as our code begins to become more and more complex, potentially including intricate conditional components, it is very easy for small mistakes (“bugs”) to compound and cause our entire program to fail, or to produce erroneous outputs/results.</p>
<p>It should be clear that having to re-type all of the statements coming after the mistake (assuming there is only one, and that we are able to locate it) is absurd, and that keeping a record of the statements comprising a piece of work in an appropriate file is an obvious answer.</p>
<p>Fortunately, like all programming languages, R allows us to maintain a list of commands in a file we refer to as an <em>R script</em>. This script can then be edited (correcting our mistakes) as well as processed, either as a whole or line-by-line. The main advantage of this is that we can save and close a script, switch off our computers and go home, with the intention of carrying on at a later time.</p>
<div id="creating-and-saving-an-r-script" class="section level3 hasAnchor" number="1.5.1">
<h3><span class="header-section-number">1.5.1</span> Creating and saving an R script<a href="introduction-to-r.html#creating-and-saving-an-r-script" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Let us put the commands we used for calculating acceleration due to Earth’s gravity into an R script. To do this in RStudio, go to <em>File &gt; New &gt; Script</em> (or pressing <code>Ctrl + Shift + N</code>). This will have created a Script panel, resizing the <strong>Console</strong> window to be smaller. The Script panel has some useful features that will be discussed in more detail, but the nicest one is that as we type out commands in the script, they will be colour-coded, making it easier to read.</p>
<p>One-by-one, type the commands used for the gravity calculations into the script panel. Your script should look like this:</p>
<div class="sourceCode" id="cb134"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb134-1"><a href="introduction-to-r.html#cb134-1" tabindex="-1"></a>G <span class="ot">&lt;-</span> <span class="fl">6.6728</span> <span class="sc">*</span> <span class="dv">10</span><span class="sc">^</span>(<span class="sc">-</span><span class="dv">11</span>)</span>
<span id="cb134-2"><a href="introduction-to-r.html#cb134-2" tabindex="-1"></a>M_earth <span class="ot">&lt;-</span> <span class="fl">5.9736</span> <span class="sc">*</span> <span class="dv">10</span><span class="sc">^</span><span class="dv">24</span></span>
<span id="cb134-3"><a href="introduction-to-r.html#cb134-3" tabindex="-1"></a>r_earth <span class="ot">&lt;-</span> <span class="fl">6.37</span> <span class="sc">*</span> <span class="dv">10</span><span class="sc">^</span><span class="dv">6</span></span>
<span id="cb134-4"><a href="introduction-to-r.html#cb134-4" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="fl">3.844</span><span class="sc">*</span><span class="dv">10</span><span class="sc">^</span><span class="dv">8</span>, <span class="at">length =</span> <span class="dv">1000</span>)</span>
<span id="cb134-5"><a href="introduction-to-r.html#cb134-5" tabindex="-1"></a>a <span class="ot">&lt;-</span> G<span class="sc">*</span>M_earth<span class="sc">/</span>(r_earth<span class="sc">+</span>d)<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb134-6"><a href="introduction-to-r.html#cb134-6" tabindex="-1"></a></span>
<span id="cb134-7"><a href="introduction-to-r.html#cb134-7" tabindex="-1"></a><span class="fu">plot</span>(d, a, <span class="at">ylab =</span> <span class="st">&#39;Acceleration&#39;</span>, <span class="at">xlab =</span> <span class="st">&#39;Distance above surface of Earth&#39;</span>, <span class="at">type =</span> <span class="st">&#39;l&#39;</span>)</span></code></pre></div>
<p>In the script panel, all of the usual text editing tools are available; cut, copy, paste, highlight and delete. If you want to split a command over more than one line, then just break it after a comma, or where it is obviously not complete.</p>
<p>For example, as far as R is concerned, these two ways of creating the <code>d</code> object are exactly the same:</p>
<div class="sourceCode" id="cb135"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb135-1"><a href="introduction-to-r.html#cb135-1" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">0</span>, <span class="at">to =</span> <span class="dv">20350</span> <span class="sc">*</span> <span class="dv">1000</span>, <span class="at">by =</span> <span class="dv">1000</span>)</span>
<span id="cb135-2"><a href="introduction-to-r.html#cb135-2" tabindex="-1"></a></span>
<span id="cb135-3"><a href="introduction-to-r.html#cb135-3" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">0</span>, <span class="at">to =</span> <span class="dv">20350</span> <span class="sc">*</span> <span class="dv">1000</span>,</span>
<span id="cb135-4"><a href="introduction-to-r.html#cb135-4" tabindex="-1"></a>            <span class="at">by =</span> <span class="dv">1000</span>)</span></code></pre></div>
<p>We can also break calculations over multiple lines, as long as it is obvious that we plan on entering more code, such as ending a line with a plus:</p>
<div class="sourceCode" id="cb136"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb136-1"><a href="introduction-to-r.html#cb136-1" tabindex="-1"></a><span class="dv">1</span> <span class="sc">+</span> <span class="dv">2</span> <span class="sc">+</span> <span class="dv">3</span> <span class="sc">+</span> <span class="dv">4</span> <span class="sc">+</span> <span class="dv">5</span> <span class="sc">+</span> </span>
<span id="cb136-2"><a href="introduction-to-r.html#cb136-2" tabindex="-1"></a>    <span class="dv">6</span> <span class="sc">+</span> <span class="dv">7</span> <span class="sc">+</span> <span class="dv">8</span></span></code></pre></div>
<pre><code>## [1] 36</code></pre>
<div class="sourceCode" id="cb138"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb138-1"><a href="introduction-to-r.html#cb138-1" tabindex="-1"></a><span class="dv">1</span> <span class="sc">+</span> <span class="dv">2</span> <span class="sc">+</span> <span class="dv">3</span> <span class="sc">+</span> <span class="dv">4</span> <span class="sc">+</span> <span class="dv">5</span> <span class="sc">+</span> <span class="dv">6</span> <span class="sc">+</span> </span>
<span id="cb138-2"><a href="introduction-to-r.html#cb138-2" tabindex="-1"></a>    <span class="dv">7</span> <span class="sc">+</span> <span class="dv">8</span></span></code></pre></div>
<pre><code>## [1] 36</code></pre>
<p>When we enter commands into an R script, these are not being processed by R. It is good to think of writing in a script as a way of <em>preparing</em> commands for R. Note that, even with a script open, you are still free to type directly into the console. To do so, simply click into the console panel and start typing. Click on the script to carry on writing there.</p>
<p>A good habit when writing scripts is to save frequently. Go to <em>File &gt; Save</em> and save the script as <code>Lab0-Gravity.R</code>, somewhere <strong>on your H drive</strong> where you will be able to find it again. You may want to create a folder called <code>R-Programming</code> and save the script in there. If you double click a file with the <code>.R</code> extension, RStudio will automatically try to open it, just like how Word is used to open <code>.doc</code> and <code>.docx</code> files.</p>
</div>
<div id="running-an-r-script" class="section level3 hasAnchor" number="1.5.2">
<h3><span class="header-section-number">1.5.2</span> Running an R script<a href="introduction-to-r.html#running-an-r-script" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Given that you have typed out and saved the gravity commands, we are now ready to let RStudio run it! To do this highlight all the lines in your script and then click on the run button:</p>
<p><img src="figures/highlight_run.png" width="80%" style="display: block; margin: auto;" /></p>
<p>By using the highlight-and-run technique we can highlight just small parts of our script that we want to re-run. Also, using the keyboard shortcut <code>Ctrl + Enter</code> (or <code>Ctrl + R</code>) means you do not have to click the run button. And if no code is highlighted, then it will simply send the current line (wherever the cursor is located) to the console.</p>
<ul>
<li>If you want to run the script line-by-line, you can navigate to the first line you want to run and then repeatedly press <code>Ctrl + Enter</code> (or <code>Ctrl + R</code>). Each time a new line will be run. This can be especially useful when debugging.</li>
</ul>
<p>Another way to run scripts is by <em>sourcing</em> them. To do this you need to know the full path of where the R script is stored, as well as the name of the script. For example, say, I store my gravity script in the following location: <code>H:\My Awesome R Scripts\Lab0-Gravity.R</code>. Then in order to source it I would enter into the console the following command:</p>
<div class="sourceCode" id="cb140"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb140-1"><a href="introduction-to-r.html#cb140-1" tabindex="-1"></a><span class="fu">source</span>(<span class="st">&quot;H:/My Awesome R Scripts/Lab0-Gravity.R&quot;</span>)</span></code></pre></div>
<p>There are two things you must remember; (i) on Windows the backslashes in filepaths must be entered in R as either double backslashes or as forward slashes, and (ii) put the complete file name in quotes. If you have got the path or file name wrong, R will tell you that it cannot find the file.</p>
<p>If there is something wrong with your code when sourcing, R will give you a more or less useful error message, at least making it obvious where the error occurred.</p>
</div>
<div id="adding-comments-to-your-script" class="section level3 hasAnchor" number="1.5.3">
<h3><span class="header-section-number">1.5.3</span> Adding comments to your script<a href="introduction-to-r.html#adding-comments-to-your-script" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The best programming habit you could ever develop is putting informative comments in your code.</p>
<p>Any line in your R script that begins with <code>#</code> will be ignored by R. Similarly if you use a <code>#</code> in the middle of a line, the remainder of that line will ignored. By using <code>#</code> we are able to add comments to our commands, and even “comment-out” our code. Type out the following script for calculating gravity, include the comments. Once you have typed out the script be sure to save it, as we will be modifying it soon. You can also use <code>Ctrl + C</code> in RStudio.</p>
<p>Everyone prefers a different amount of commenting. So I strongly recommend you to develop your own style (this no excuse for having no comments). For more complex code, a general recommendation is to comment less on <em>what</em> the code is doing but rather on <em>why</em> the code is doing what it is doing (the example below is not following this principle too much).</p>
<div class="sourceCode" id="cb141"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb141-1"><a href="introduction-to-r.html#cb141-1" tabindex="-1"></a><span class="co"># Look at the relationship between acceleration due to</span></span>
<span id="cb141-2"><a href="introduction-to-r.html#cb141-2" tabindex="-1"></a><span class="co"># gravity and distance from the Earth&#39;s surface.</span></span>
<span id="cb141-3"><a href="introduction-to-r.html#cb141-3" tabindex="-1"></a></span>
<span id="cb141-4"><a href="introduction-to-r.html#cb141-4" tabindex="-1"></a><span class="co"># ref: http://en.wikipedia.org/wiki/Gravity_of_Earth</span></span>
<span id="cb141-5"><a href="introduction-to-r.html#cb141-5" tabindex="-1"></a></span>
<span id="cb141-6"><a href="introduction-to-r.html#cb141-6" tabindex="-1"></a><span class="co"># Constants ----</span></span>
<span id="cb141-7"><a href="introduction-to-r.html#cb141-7" tabindex="-1"></a></span>
<span id="cb141-8"><a href="introduction-to-r.html#cb141-8" tabindex="-1"></a><span class="co"># Gravitational constant (m^3 kg^-1 s^-2)</span></span>
<span id="cb141-9"><a href="introduction-to-r.html#cb141-9" tabindex="-1"></a>G <span class="ot">&lt;-</span> <span class="fl">6.6728</span> <span class="sc">*</span> <span class="dv">10</span><span class="sc">^-</span><span class="dv">11</span></span>
<span id="cb141-10"><a href="introduction-to-r.html#cb141-10" tabindex="-1"></a></span>
<span id="cb141-11"><a href="introduction-to-r.html#cb141-11" tabindex="-1"></a><span class="co"># Approximate average radius of the Earth (m)</span></span>
<span id="cb141-12"><a href="introduction-to-r.html#cb141-12" tabindex="-1"></a>r_earth <span class="ot">&lt;-</span> <span class="fl">6.37</span> <span class="sc">*</span> <span class="dv">10</span><span class="sc">^</span><span class="dv">6</span></span>
<span id="cb141-13"><a href="introduction-to-r.html#cb141-13" tabindex="-1"></a></span>
<span id="cb141-14"><a href="introduction-to-r.html#cb141-14" tabindex="-1"></a><span class="co"># Approximate mass of the Earth (kg)</span></span>
<span id="cb141-15"><a href="introduction-to-r.html#cb141-15" tabindex="-1"></a>M_earth <span class="ot">&lt;-</span> <span class="fl">5.9736</span> <span class="sc">*</span> <span class="dv">10</span><span class="sc">^</span><span class="dv">24</span></span>
<span id="cb141-16"><a href="introduction-to-r.html#cb141-16" tabindex="-1"></a></span>
<span id="cb141-17"><a href="introduction-to-r.html#cb141-17" tabindex="-1"></a><span class="co"># Generate distance vector from Earth&#39;s surface (0m)</span></span>
<span id="cb141-18"><a href="introduction-to-r.html#cb141-18" tabindex="-1"></a><span class="co"># up to the distance between Earth and the moon (384,400 km)</span></span>
<span id="cb141-19"><a href="introduction-to-r.html#cb141-19" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">0</span>, <span class="at">to =</span> <span class="fl">3.844</span><span class="sc">*</span><span class="dv">10</span><span class="sc">^</span><span class="dv">8</span>, <span class="at">length =</span> <span class="dv">1000</span>)</span>
<span id="cb141-20"><a href="introduction-to-r.html#cb141-20" tabindex="-1"></a></span>
<span id="cb141-21"><a href="introduction-to-r.html#cb141-21" tabindex="-1"></a><span class="co"># We measure from the centre of the Earth to the centre of</span></span>
<span id="cb141-22"><a href="introduction-to-r.html#cb141-22" tabindex="-1"></a><span class="co"># the other object:</span></span>
<span id="cb141-23"><a href="introduction-to-r.html#cb141-23" tabindex="-1"></a>r <span class="ot">&lt;-</span> r_earth <span class="sc">+</span> d</span>
<span id="cb141-24"><a href="introduction-to-r.html#cb141-24" tabindex="-1"></a></span>
<span id="cb141-25"><a href="introduction-to-r.html#cb141-25" tabindex="-1"></a><span class="co"># Earth&#39;s gravitational acceleration based on distance</span></span>
<span id="cb141-26"><a href="introduction-to-r.html#cb141-26" tabindex="-1"></a>a <span class="ot">&lt;-</span> G <span class="sc">*</span> M_earth <span class="sc">/</span> r<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb141-27"><a href="introduction-to-r.html#cb141-27" tabindex="-1"></a></span>
<span id="cb141-28"><a href="introduction-to-r.html#cb141-28" tabindex="-1"></a><span class="co"># Produce the plot ----</span></span>
<span id="cb141-29"><a href="introduction-to-r.html#cb141-29" tabindex="-1"></a><span class="co"># Set distance to km instead of m for x-axis labels</span></span>
<span id="cb141-30"><a href="introduction-to-r.html#cb141-30" tabindex="-1"></a>d_km <span class="ot">&lt;-</span> d <span class="sc">/</span> <span class="dv">1000</span></span>
<span id="cb141-31"><a href="introduction-to-r.html#cb141-31" tabindex="-1"></a></span>
<span id="cb141-32"><a href="introduction-to-r.html#cb141-32" tabindex="-1"></a><span class="fu">plot</span>(<span class="at">x =</span> d_km, <span class="at">y =</span> a, <span class="at">type =</span> <span class="st">&quot;l&quot;</span>,</span>
<span id="cb141-33"><a href="introduction-to-r.html#cb141-33" tabindex="-1"></a>     <span class="at">xlab =</span> <span class="st">&quot;Distance above surface of Earth (km)&quot;</span>,</span>
<span id="cb141-34"><a href="introduction-to-r.html#cb141-34" tabindex="-1"></a>     <span class="at">ylab =</span> <span class="st">&quot;Acceleration&quot;</span>)</span></code></pre></div>
</div>
<div id="s:0summary2" class="section level3 hasAnchor" number="1.5.4">
<h3><span class="header-section-number">1.5.4</span> Summary<a href="introduction-to-r.html#s:0summary2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li><p>An R script is a prepared list of R commands that are processed sequentially by R from top to bottom. Using the script editor in RStudio, scripts can be written, edited, saved, and run.</p></li>
<li><p>To create a new script go to <em>File &gt; New &gt; R Script</em>. To open an existing scrip, <em>File &gt; Open…</em>. If you have more than one script open, RStudio will create tabs across the top of the script panel.</p></li>
<li><p>R scripts have the file extension <code>.R</code>, make sure you include this when saving your script for the first time.</p></li>
<li><p>Running an R script means sending the contents of the script to the console. Portions of the script can be sent by highlighting the relevant code and click the <code>Run</code> button or using the shortcut <code>Ctrl + Enter</code>.</p></li>
<li><p>Scripts will often contain bugs. Bugs are usually caused by a missing common or bracket, or from an incorrect object name. In order to track down bugs, try running your script one section at a time. Followed by one line at a time, when you have found the offending section.</p></li>
<li><p>By starting a line with <code>#</code> we are able to add comments to our code, as R will ignore any text to the right of this symbol. Adding comments, to break-up your code into sections as well as explain the purpose of each section, is crucial for future you to understand the purpose of your script, what it is trying to achieve, and what features are still yet to be added.</p></li>
</ul>
</div>
</div>
<div id="r-markdown" class="section level2 hasAnchor" number="1.6">
<h2><span class="header-section-number">1.6</span> R markdown<a href="introduction-to-r.html#r-markdown" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>R Markdown is a file format for making dynamic reports that combine code, text, and formatting. An R Markdown document is written in markdown, an easy-to-write plain text format, and contains chunks of embedded R code.</p>
<p>Differently from an R script, that is a simple text file, an R Markdown script is a text document that combines code with text and formatting to create a dynamic report. The code is organized into chunks that can be executed to produce output, such as tables and plots. You can interactively access and edit the <code>.Rmd</code> file in Rstudio. In addition, the <code>.Rmd</code> document can be rendered (exported) into various output formats, such as HTML, PDF, or Word, making it easy to share and present your results and ensure that they can reproduce your results. <strong>You will be required to submit an .Rmd for your coursework, as well as the rendered output document in html</strong>.</p>
<p>In fact the very notes you are reading now were written entirely in .Rmd, and compiled to be an interactive webpage!</p>
<div id="r-markdown-basics" class="section level3 hasAnchor" number="1.6.1">
<h3><span class="header-section-number">1.6.1</span> R markdown basics<a href="introduction-to-r.html#r-markdown-basics" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>To write paragraphs, such as this one you are reading now, simply separate text in a <code>.Rmd</code> file with a blank line.</p>
<p>To write titles and subtitles, you can use the <code>#</code> symbol followed by a space and the text of the title. The number of <code>#</code> symbols determines the level of the heading, with one <code>#</code> being the highest level and six <code>#</code> being the lowest. For example:</p>
<pre><code># Title
## Subtitle</code></pre>
<p>R chunks are used to embed R code in an R Markdown document. They are enclosed in triple backticks and start with <code>{r}</code>:</p>
<p><img src="week0/rmd_chunk.png" width="130" /></p>
<p>This will generate an R chunk, as the one below, that will get evaluated, including its output.</p>
<div class="sourceCode" id="cb143"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb143-1"><a href="introduction-to-r.html#cb143-1" tabindex="-1"></a><span class="fu">head</span>(cars)</span></code></pre></div>
<pre><code>##   speed dist
## 1     4    2
## 2     4   10
## 3     7    4
## 4     7   22
## 5     8   16
## 6     9   10</code></pre>
<p>Try to create a new .Rmd file from R studio and give it a try yourself! Go on file &gt; new file &gt; R markdown. There will be a window popping up, fill in the details and see for yourself the new <code>.Rmd</code> document!</p>
<p>A video illustrating R markdown, produced by one of my colleagues, can be found below: <video src="week0/r_markdown_demo.mp4" width="720" controls=""><a href="week0/r_markdown_demo.mp4">Video</a></video></p>
<p>These whole set of lecture notes was generated in Rmarkdown!</p>
<p>If you want to learn more about <code>.Rmd</code>, see the official webpage <a href="https://rmarkdown.rstudio.com/">Using R Markdown.</a></p>
</div>
<div id="exercise" class="section level3 hasAnchor" number="1.6.2">
<h3><span class="header-section-number">1.6.2</span> Exercise<a href="introduction-to-r.html#exercise" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Based on your gravity script, edit your code so that the gravity plot includes a horizontal line illustrating the magnitude of gravitation acceleration at the surface of the moon. Work in an R markdown to make sure your analysis, from the start to the final plot, is reproducible. Add some textual notes in the <code>.Rmd</code> file which describe the contents of the plot.</p>
</div>
</div>
<div id="functions" class="section level2 hasAnchor" number="1.7">
<h2><span class="header-section-number">1.7</span> Functions<a href="introduction-to-r.html#functions" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Functions are a really important concept both in mathematics <em>and</em> computing. They are typically used to <em>abstract</em> away detailed computations that perform an operation (or set of operations) on some input, and return an output. In mathematics, we are well used to defining functions, such as <span class="math display">\[
f(x) = x^2
\]</span> or <span class="math display">\[
f(x; \mu, \sigma) = \frac{1}{\sqrt{2\pi}\sigma} \exp\left(-{\frac{(x - \mu)^2}{2\sigma^2}}\right).
\]</span></p>
<p>Mathematical functions have (input) arguments (<span class="math inline">\(x\)</span>, and <span class="math inline">\(x, \mu, \sigma\)</span> respectively above), and typically return the result of evaluating the expression on the right hand side of the equality sign.</p>
<p>Functions in computer languages are similar to mathematical functions, except they can be regarded as entire <em>computations</em> in themselves, perhaps performing an entire set of steps such as training a neural net by gradient descent methods. Indeed, in our daily programming, it is a very good idea to use functions liberally to avoid <a href="https://en.wikipedia.org/wiki/Duplicate_code">un-necessary or repetitive code</a> that can be prone to errors.</p>
<p>We have already used several functions:</p>
<ul>
<li><code>c(...)</code> Combines objects often into a vector, where the comma-separated argument list represented by <code>...</code> takes objects or values to be combined.</li>
<li><code>seq(from, to, by)</code> Generates a vector containing a seq of numbers specified by the arguments <code>from</code>, <code>to</code> and <code>by</code>.</li>
<li><code>plot(x, y)</code> Creates a scatter plot of points using arguments <code>x</code> and <code>y</code> as co-ordinates for the points.</li>
<li><code>length(x)</code> Returns the number of elements in the vector <code>x</code></li>
</ul>
<p>Here are some other functions that can be useful when working with vectors:</p>
<ul>
<li><code>sum(x)</code> Returns the total from adding all the elements in <code>x</code> together</li>
<li><code>prod(x)</code> Returns the total from multiplying all the elements in <code>x</code>. Note that <code>prod</code> is short for product which is the mathematical name given to this process.</li>
<li><code>sqrt(x)</code> Returns a vector of the same length of , but each element is the square-root of the corresponding element in <code>x</code>.</li>
<li><code>max(x)</code>, <code>min(x)</code> Returns the maximum and minimum element from a vector, respectively.</li>
</ul>
<p>Try them out:</p>
<div class="sourceCode" id="cb145"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb145-1"><a href="introduction-to-r.html#cb145-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="sc">-</span><span class="dv">1</span><span class="sc">:</span><span class="dv">10</span></span>
<span id="cb145-2"><a href="introduction-to-r.html#cb145-2" tabindex="-1"></a><span class="fu">sum</span>(x)</span></code></pre></div>
<pre><code>## [1] 54</code></pre>
<div class="sourceCode" id="cb147"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb147-1"><a href="introduction-to-r.html#cb147-1" tabindex="-1"></a><span class="fu">prod</span>(x)</span></code></pre></div>
<pre><code>## [1] 0</code></pre>
<div class="sourceCode" id="cb149"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb149-1"><a href="introduction-to-r.html#cb149-1" tabindex="-1"></a><span class="fu">min</span>(x)</span></code></pre></div>
<pre><code>## [1] -1</code></pre>
<div class="sourceCode" id="cb151"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb151-1"><a href="introduction-to-r.html#cb151-1" tabindex="-1"></a><span class="fu">max</span>(x)</span></code></pre></div>
<pre><code>## [1] 10</code></pre>
<div class="sourceCode" id="cb153"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb153-1"><a href="introduction-to-r.html#cb153-1" tabindex="-1"></a><span class="fu">sqrt</span>(x)</span></code></pre></div>
<pre><code>##  [1]      NaN 0.000000 1.000000 1.414214 1.732051 2.000000 2.236068 2.449490
##  [9] 2.645751 2.828427 3.000000 3.162278</code></pre>
<p>For the <code>sqrt(x)</code> command, we were giving a warning saying <code>NaNs</code> had been produced. NaN is short for “Not a Number” and in this instance they have occurred because we tried to calculate the square-root of a negative number (which do not exist as real numbers). Once an element becomes Not a Number, that status will persist throughout the rest of our calculations. For example:</p>
<div class="sourceCode" id="cb155"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb155-1"><a href="introduction-to-r.html#cb155-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="sc">-</span><span class="dv">2</span><span class="sc">:</span><span class="dv">2</span></span>
<span id="cb155-2"><a href="introduction-to-r.html#cb155-2" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">5</span>, <span class="dv">0</span>, <span class="sc">-</span><span class="dv">5</span>, <span class="sc">-</span><span class="dv">10</span>)</span>
<span id="cb155-3"><a href="introduction-to-r.html#cb155-3" tabindex="-1"></a><span class="fu">sqrt</span>(x) <span class="sc">+</span> <span class="fu">sqrt</span>(y)</span></code></pre></div>
<pre><code>## [1] NaN NaN   0 NaN NaN</code></pre>
<p>Because <code>sqrt(x)</code> and <code>sqrt(y)</code> produced <code>NaNs</code> that were in different places, this resulted in us producing four <code>NaNs</code> when adding the two square-rooted vectors together.</p>
<div id="creating-new-functions" class="section level3 hasAnchor" number="1.7.1">
<h3><span class="header-section-number">1.7.1</span> Creating New Functions<a href="introduction-to-r.html#creating-new-functions" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>R, like all modern programming languages, allows you to create your own functions. This is a great time saver when you are repeatedly performing the same computation, albeit on different data sets. <strong>Writing your own functions is definitely a habit you should develop</strong>.</p>
<p>Our previous code could not be easily re-used without copy and pasting, and it should be pretty obvious that copying blocks of code all over the place greatly increases the chance of errors – maybe you dropped your coffee on your keyboard, or your cat inadvertently hit the delete key somewhere in a long script!</p>
<p>Instead, we can <em>abstract</em> our gravity computation into a function called <code>calc_gravity</code>, which should be added to a new R script:</p>
<div class="sourceCode" id="cb157"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb157-1"><a href="introduction-to-r.html#cb157-1" tabindex="-1"></a>calc_gravity <span class="ot">&lt;-</span> <span class="cf">function</span>(distance) {</span>
<span id="cb157-2"><a href="introduction-to-r.html#cb157-2" tabindex="-1"></a>  </span>
<span id="cb157-3"><a href="introduction-to-r.html#cb157-3" tabindex="-1"></a>    <span class="co"># constants</span></span>
<span id="cb157-4"><a href="introduction-to-r.html#cb157-4" tabindex="-1"></a>  G <span class="ot">&lt;-</span> <span class="fl">6.6728</span> <span class="sc">*</span> <span class="dv">10</span><span class="sc">^</span>(<span class="sc">-</span><span class="dv">11</span>)</span>
<span id="cb157-5"><a href="introduction-to-r.html#cb157-5" tabindex="-1"></a>  M_earth <span class="ot">&lt;-</span> <span class="fl">5.9736</span> <span class="sc">*</span> <span class="dv">10</span><span class="sc">^</span><span class="dv">24</span></span>
<span id="cb157-6"><a href="introduction-to-r.html#cb157-6" tabindex="-1"></a>  r_earth <span class="ot">&lt;-</span> <span class="fl">6.37</span> <span class="sc">*</span> <span class="dv">10</span><span class="sc">^</span><span class="dv">6</span></span>
<span id="cb157-7"><a href="introduction-to-r.html#cb157-7" tabindex="-1"></a>    </span>
<span id="cb157-8"><a href="introduction-to-r.html#cb157-8" tabindex="-1"></a>    <span class="co"># calculation</span></span>
<span id="cb157-9"><a href="introduction-to-r.html#cb157-9" tabindex="-1"></a>    r <span class="ot">&lt;-</span> r_earth <span class="sc">+</span> distance</span>
<span id="cb157-10"><a href="introduction-to-r.html#cb157-10" tabindex="-1"></a>    a <span class="ot">&lt;-</span> G <span class="sc">*</span> M_earth <span class="sc">/</span> r<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb157-11"><a href="introduction-to-r.html#cb157-11" tabindex="-1"></a>   </span>
<span id="cb157-12"><a href="introduction-to-r.html#cb157-12" tabindex="-1"></a>    <span class="fu">return</span>(a)</span>
<span id="cb157-13"><a href="introduction-to-r.html#cb157-13" tabindex="-1"></a>}</span></code></pre></div>
<p>Now run the code. You will see nothing really happened, and by now you shouldn’t expect it to: we assigned the result of evaluating the expression <code>function(distance) { ... }</code> to an object <code>calc_gravity</code>. We can think of this as the keyword <code>function</code> telling R to build a function which encapsulated the gravity computation taking a single argument <code>distance</code>, which we assign to the name <code>calc_gravity</code>.</p>
<p>This gives us three major wins:</p>
<ol style="list-style-type: decimal">
<li>We can test <code>calc_gravity</code> to ensure it returns correct results over a range of values for <code>distance</code>;</li>
<li>We can now use the function in our own code, leading to shorter <em>scripts</em> with fewer opportunities for errors;</li>
<li>If we choose the function name to be descriptive of the computation it represents, we will have more readable code.</li>
</ol>
<p>If you check the Environment panel, or use <code>ls()</code> in the console to list the contents of the environment, you should see that <code>calc_gravity</code> is present. To check that it works try:</p>
<div class="sourceCode" id="cb158"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb158-1"><a href="introduction-to-r.html#cb158-1" tabindex="-1"></a><span class="fu">calc_gravity</span>(<span class="at">distance=</span><span class="dv">0</span>)</span></code></pre></div>
<pre><code>## [1] 9.82348</code></pre>
<p>This matches our earlier calculations (9.82), so we have good hope that we have implemented it correctly.</p>
<p>The single argument (<code>distance</code>) could simply be a number, like zero in the above <em>test</em>, but R (unlike many other languages) does not force us to commit to the types of function arguments, and as long as it is able to perform all the operations/calculations needed to apply the function it will “work”. For example, we could produce the same plot we had before by passing a vector of distances as an argument:</p>
<div class="sourceCode" id="cb160"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb160-1"><a href="introduction-to-r.html#cb160-1" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="fl">3.844</span><span class="sc">*</span><span class="dv">10</span><span class="sc">^</span><span class="dv">8</span>, <span class="at">length =</span> <span class="dv">1000</span>)</span>
<span id="cb160-2"><a href="introduction-to-r.html#cb160-2" tabindex="-1"></a><span class="fu">plot</span>(d, <span class="fu">calc_gravity</span>(d), <span class="at">ylab =</span> <span class="st">&#39;Acceleration&#39;</span>,</span>
<span id="cb160-3"><a href="introduction-to-r.html#cb160-3" tabindex="-1"></a>     <span class="at">xlab =</span> <span class="st">&#39;Distance above surface of Earth&#39;</span>, <span class="at">type =</span> <span class="st">&#39;l&#39;</span>)</span></code></pre></div>
<p><img src="figures/unnamed-chunk-61-1.png" width="576" style="display: block; margin: auto;" /></p>
<p><strong>Naming functions</strong></p>
<blockquote>
<p>There are only two hard things in Computer Science: cache invalidation and naming things.</br> – Phil Carlton</p>
</blockquote>
<p>The name of the function <code>calc_gravity</code> and its argument <code>distance</code> are just names that we chose, and you may wish to consider others that might be more meaningful or easy to remember. There are a few guidelines when naming functions:</p>
<ul>
<li>Names should be lowercase.</li>
<li>Use an underscore, <code>_</code>, to separate words within a name.</li>
<li>Function names should use verbs, as functions <em>do</em> things.</li>
<li>Argument names should use nouns, as arguments <em>are</em> things.</li>
<li>Strive for names that are concise and meaningful (this is not easy!).</li>
<li>Avoid existing function names in R, such as <code>length()</code>.</li>
</ul>
<p>Note that how we name functions will not affect how (or whether) they operate, but if you stick to these guidelines, then your coding-life just got a lot easier. This is mainly because it is easier for you to remember and guess what you have called your functions.</p>
<ul>
<li>One exception where R will not allow you to name an object as you wish is if it starts with a number, e.g. <code>1_function_name</code> is <em>not</em> allowed, but <code>function_name_1</code> is.</li>
<li>The same rules above apply for objects. Except you should try to use nouns rather than verbs.</li>
</ul>
<p><strong>Return values</strong>:</p>
<p>The code used to calculate gravity sits between two curly-brackets. The <code>return(a)</code> statement then defines the output of the function, and should also be the last command inside your function. In this case, we simply return a single value we calculated. But for more complex functions, it could be a vector, a plot or a model.</p>
<p><strong>Scope</strong>:</p>
<p>When creating your own functions there are two important things to remember regarding how R stores and interprets them:</p>
<ol style="list-style-type: decimal">
<li>Any objects created inside a function are said to be in the <em>local scope</em> of that function. This means that they exist only inside your function, so you do not need to worry about over-writing objects with the same name outside the function.</li>
<li>Local objects are generally not available outside of the function, i.e. from the <em>global</em> scope. The way these values (or computations involving those objects) can be communicated from the local to global scope is via the <code>return()</code> statement at the end.
<ul>
<li>It is possible to create/modify objects in the global scope within a function using <code>&lt;&lt;-</code> instead of <code>&lt;-</code>, however this is considered poor coding practice and is strongly discouraged.</li>
</ul></li>
<li>Although we can see our function in the <em>Environment</em> browser, the new function is not permanent. It will disappear when we exit RStudio. This is why we store our functions in scripts (or even packages/libraries), so we can <code>source</code> them at the start of session to get back what we need.</li>
</ol>
</div>
<div id="default-values-for-function-arguments" class="section level3 hasAnchor" number="1.7.2">
<h3><span class="header-section-number">1.7.2</span> Default values for function arguments<a href="introduction-to-r.html#default-values-for-function-arguments" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Now suppose we want to calculate the gravity for the other planets. To do this we would modify our <code>calc_gravity()</code> function, so that it includes arguments for the mass and radius of a planet. Right now, it assumes we are only interested in Earth. Make the following modifications in your script:</p>
<div class="sourceCode" id="cb161"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb161-1"><a href="introduction-to-r.html#cb161-1" tabindex="-1"></a>calc_gravity <span class="ot">&lt;-</span> <span class="cf">function</span>(distance, mass, radius) {</span>
<span id="cb161-2"><a href="introduction-to-r.html#cb161-2" tabindex="-1"></a>    <span class="co"># constant</span></span>
<span id="cb161-3"><a href="introduction-to-r.html#cb161-3" tabindex="-1"></a>    G <span class="ot">&lt;-</span> <span class="fl">6.6728</span> <span class="sc">*</span> <span class="dv">10</span><span class="sc">^-</span><span class="dv">11</span></span>
<span id="cb161-4"><a href="introduction-to-r.html#cb161-4" tabindex="-1"></a>    </span>
<span id="cb161-5"><a href="introduction-to-r.html#cb161-5" tabindex="-1"></a>    <span class="co"># calculation</span></span>
<span id="cb161-6"><a href="introduction-to-r.html#cb161-6" tabindex="-1"></a>    r <span class="ot">&lt;-</span> radius <span class="sc">+</span> distance</span>
<span id="cb161-7"><a href="introduction-to-r.html#cb161-7" tabindex="-1"></a>    a <span class="ot">&lt;-</span> G <span class="sc">*</span> mass <span class="sc">/</span> r<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb161-8"><a href="introduction-to-r.html#cb161-8" tabindex="-1"></a>    </span>
<span id="cb161-9"><a href="introduction-to-r.html#cb161-9" tabindex="-1"></a>    <span class="fu">return</span>(a)</span>
<span id="cb161-10"><a href="introduction-to-r.html#cb161-10" tabindex="-1"></a>}</span></code></pre></div>
<p>In order to update <code>calc_gravity()</code> so that it includes these additional arguments you will need to run the above code. This means that simply passing the distance will no longer work:</p>
<div class="sourceCode" id="cb162"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb162-1"><a href="introduction-to-r.html#cb162-1" tabindex="-1"></a><span class="fu">calc_gravity</span>(<span class="at">distance =</span> <span class="dv">0</span>)</span></code></pre></div>
<pre><code>## Error in calc_gravity(distance = 0): argument &quot;radius&quot; is missing, with no default</code></pre>
<p>We now have to include mass and radius:</p>
<div class="sourceCode" id="cb164"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb164-1"><a href="introduction-to-r.html#cb164-1" tabindex="-1"></a><span class="fu">calc_gravity</span>(<span class="at">distance =</span> <span class="dv">0</span>, <span class="at">mass =</span> <span class="fl">5.9736</span> <span class="sc">*</span> <span class="dv">10</span><span class="sc">^</span><span class="dv">24</span>, <span class="at">radius =</span> <span class="fl">6.37</span> <span class="sc">*</span> <span class="dv">10</span><span class="sc">^</span><span class="dv">6</span>)</span></code></pre></div>
<pre><code>## [1] 9.82348</code></pre>
<p>But, say, that 90% of the time when we are doing these calculations they are in the context of Earth. Then to be more efficient, rather than continuously having to give the mass and radius of Earth, we could set the arguments to have these as default values:</p>
<div class="sourceCode" id="cb166"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb166-1"><a href="introduction-to-r.html#cb166-1" tabindex="-1"></a>calc_gravity <span class="ot">&lt;-</span> <span class="cf">function</span>(<span class="at">distance =</span> <span class="dv">0</span>, <span class="at">mass =</span> <span class="fl">5.9736</span> <span class="sc">*</span> <span class="dv">10</span><span class="sc">^</span><span class="dv">24</span>, <span class="at">radius =</span> <span class="fl">6.37</span> <span class="sc">*</span> <span class="dv">10</span><span class="sc">^</span><span class="dv">6</span>) {</span>
<span id="cb166-2"><a href="introduction-to-r.html#cb166-2" tabindex="-1"></a>    <span class="co"># constant</span></span>
<span id="cb166-3"><a href="introduction-to-r.html#cb166-3" tabindex="-1"></a>    G <span class="ot">&lt;-</span> <span class="fl">6.6728</span> <span class="sc">*</span> <span class="dv">10</span><span class="sc">^-</span><span class="dv">11</span></span>
<span id="cb166-4"><a href="introduction-to-r.html#cb166-4" tabindex="-1"></a>    </span>
<span id="cb166-5"><a href="introduction-to-r.html#cb166-5" tabindex="-1"></a>    <span class="co"># calculation</span></span>
<span id="cb166-6"><a href="introduction-to-r.html#cb166-6" tabindex="-1"></a>    r <span class="ot">&lt;-</span> radius <span class="sc">+</span> distance</span>
<span id="cb166-7"><a href="introduction-to-r.html#cb166-7" tabindex="-1"></a>    a <span class="ot">&lt;-</span> G <span class="sc">*</span> mass <span class="sc">/</span> r<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb166-8"><a href="introduction-to-r.html#cb166-8" tabindex="-1"></a>    </span>
<span id="cb166-9"><a href="introduction-to-r.html#cb166-9" tabindex="-1"></a>    <span class="fu">return</span>(a)</span>
<span id="cb166-10"><a href="introduction-to-r.html#cb166-10" tabindex="-1"></a>}</span></code></pre></div>
<p>This means that if one simply calls <code>calc_gravity()</code> without specifying any arguments, the function will assume they are interested in in the gravity at Earth’s surface.</p>
<div class="sourceCode" id="cb167"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb167-1"><a href="introduction-to-r.html#cb167-1" tabindex="-1"></a><span class="fu">calc_gravity</span>()</span></code></pre></div>
<pre><code>## [1] 9.82348</code></pre>
<p>But we are free to override these defaults:</p>
<div class="sourceCode" id="cb169"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb169-1"><a href="introduction-to-r.html#cb169-1" tabindex="-1"></a><span class="co"># On the surface of Saturn</span></span>
<span id="cb169-2"><a href="introduction-to-r.html#cb169-2" tabindex="-1"></a><span class="fu">calc_gravity</span>(<span class="at">mass =</span> <span class="fl">5.683</span> <span class="sc">*</span> <span class="dv">10</span><span class="sc">^</span><span class="dv">26</span>, <span class="at">radius =</span> <span class="fl">5.8</span> <span class="sc">*</span> <span class="dv">10</span><span class="sc">^</span><span class="dv">7</span>)</span></code></pre></div>
<pre><code>## [1] 11.27275</code></pre>
</div>
<div id="s:0summary3" class="section level3 hasAnchor" number="1.7.3">
<h3><span class="header-section-number">1.7.3</span> Summary<a href="introduction-to-r.html#s:0summary3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>Functions exist to reduce the amount of repetitive work we do. By creating our own functions, we write out a task or calculation once and then can use it many times.</li>
<li>Useful functions for working with vectors include: <code>length()</code>, <code>sum()</code>, <code>prod()</code>, <code>cumsum()</code>, <code>sqrt()</code>, <code>min()</code>, and <code>max()</code>.</li>
<li>When creating our own functions we also define the names of the functions arguments, their default values (if any), and what the function returns.</li>
</ul>
<p>In your script:</p>
<div class="sourceCode" id="cb171"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb171-1"><a href="introduction-to-r.html#cb171-1" tabindex="-1"></a>say_hello <span class="ot">&lt;-</span> <span class="cf">function</span>(<span class="at">person =</span> <span class="st">&quot;World&quot;</span>) {</span>
<span id="cb171-2"><a href="introduction-to-r.html#cb171-2" tabindex="-1"></a>    msg <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">&quot;Hello &quot;</span>, person)</span>
<span id="cb171-3"><a href="introduction-to-r.html#cb171-3" tabindex="-1"></a>    <span class="fu">return</span>(msg)</span>
<span id="cb171-4"><a href="introduction-to-r.html#cb171-4" tabindex="-1"></a>}</span></code></pre></div>
<p>In the console:</p>
<div class="sourceCode" id="cb172"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb172-1"><a href="introduction-to-r.html#cb172-1" tabindex="-1"></a><span class="fu">say_hello</span>()</span></code></pre></div>
<pre><code>## [1] &quot;Hello  World&quot;</code></pre>
<div class="sourceCode" id="cb174"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb174-1"><a href="introduction-to-r.html#cb174-1" tabindex="-1"></a><span class="fu">say_hello</span>(<span class="st">&quot;Bob&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;Hello  Bob&quot;</code></pre>
<p>Guidelines you should try to stick to when naming functions:</p>
<ul>
<li>Names should be lowercase.</li>
<li>Use an underscore, <code>_</code>, to separate words within a name.</li>
<li>Generally, function names should use verbs, as functions <em>do</em> things.</li>
<li>Strive for names that are concise and meaningful (this is not easy!).</li>
<li>Avoid existing function names in R, such as <code>length()</code>.</li>
<li>When naming objects, follow the same guidelines but instead use <em>nouns</em> instead of verbs.</li>
</ul>
</div>
<div id="exercises-1" class="section level3 hasAnchor" number="1.7.4">
<h3><span class="header-section-number">1.7.4</span> Exercises<a href="introduction-to-r.html#exercises-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ol style="list-style-type: decimal">
<li>Rewrite your gravity script, implementing the latest function for <code>calc_gravity</code>. Perform the following calculations. You will need to do a bit of research to find the necessary constants.</li>
</ol>
<!-- -->
<ol style="list-style-type: lower-alpha">
<li><p>What is the gravity at the surface of each of the planets in our Solar System (Mercury, Venus, Earth, Mars, Jupiter, Saturn, Uranus, Neptune)?</p></li>
<li><p>Produce a plot of the gravity on Mars, from the surface (0m) up to the orbit height of Phobos (Mars’ first moon).</p></li>
</ol>
<pre><code>Hint: Use the &quot;semi-major axis&quot; of
Phobos&#39; orbit as the orbit height. This is because Phobos has an elliptical
orbit.</code></pre>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:unnamed-chunk-70"></span>
<img src="week0/Planets2013.jpg" alt="The Sun and planets of the Solar System. Sizes but not distances are to scale. (Image from Wikimedia Commons)" width="50%" />
<p class="caption">
Figure 1.1: The Sun and planets of the Solar System. Sizes but not distances are to scale. (Image from Wikimedia Commons)
</p>
</div>
<ol start="2" style="list-style-type: decimal">
<li>A good recipe book will state all its baking temperatures in terms of Gas Mark, degrees Celsius, and degrees Fahrenheit. A lazy book will pick one, and simply provide a conversion table. The rubbish ones will offer no such table. In those instances, I often have to manually convert the numbers myself. Or rather I write a function that I can repeatedly use (which is also what you are about to do).</li>
</ol>
<!-- -->
<ol style="list-style-type: lower-alpha">
<li><p>Create and save a new script for this exercise. Look up the calculation for converting Celsius to Fahrenheit. Implement a function which takes a temperature in Celsius and returns it in Fahrenheit, call it <code>degC_to_degF</code>.</p></li>
<li><p>Look up the conversion for Fahrenheit to Gas Mark, and implement this as <code>degF_to_gas()</code>.</p></li>
</ol>
<pre><code>Hint: You may need to make use of the `ceiling()`, `floor()`
and `round()` functions:</code></pre>
<div class="sourceCode" id="cb178"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb178-1"><a href="introduction-to-r.html#cb178-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fl">5.4567218</span></span>
<span id="cb178-2"><a href="introduction-to-r.html#cb178-2" tabindex="-1"></a><span class="fu">ceiling</span>(x)</span></code></pre></div>
<pre><code>## [1] 6</code></pre>
<div class="sourceCode" id="cb180"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb180-1"><a href="introduction-to-r.html#cb180-1" tabindex="-1"></a><span class="fu">floor</span>(x)</span></code></pre></div>
<pre><code>## [1] 5</code></pre>
<div class="sourceCode" id="cb182"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb182-1"><a href="introduction-to-r.html#cb182-1" tabindex="-1"></a><span class="fu">round</span>(x)</span></code></pre></div>
<pre><code>## [1] 5</code></pre>
<div class="sourceCode" id="cb184"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb184-1"><a href="introduction-to-r.html#cb184-1" tabindex="-1"></a><span class="fu">round</span>(x, <span class="dv">3</span>)</span></code></pre></div>
<pre><code>## [1] 5.457</code></pre>
<ol start="3" style="list-style-type: lower-alpha">
<li><p>Implement the conversion of Celsius to Gas Mark, <code>degC_to_gas()</code>, using the previous two functions.</p></li>
<li><p>Confirm the following approximate conversions:</p></li>
</ol>
<table>
<thead>
<tr class="header">
<th>Celsius</th>
<th>Gas Mark</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>140</td>
<td>1</td>
</tr>
<tr class="even">
<td>150</td>
<td>2</td>
</tr>
<tr class="odd">
<td>160</td>
<td>3</td>
</tr>
<tr class="even">
<td>180</td>
<td>4</td>
</tr>
<tr class="odd">
<td>190</td>
<td>5</td>
</tr>
<tr class="even">
<td>200</td>
<td>6</td>
</tr>
<tr class="odd">
<td>220</td>
<td>7</td>
</tr>
<tr class="even">
<td>230</td>
<td>8</td>
</tr>
<tr class="odd">
<td>240</td>
<td>9</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="s:0help" class="section level2 hasAnchor" number="1.8">
<h2><span class="header-section-number">1.8</span> Getting Help<a href="introduction-to-r.html#s:0help" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>For help concerning a known R function, you can use the <code>help</code> function. For instance, to get a listing of information about the <code>seq()</code> function, type the following into the console:</p>
<div class="sourceCode" id="cb186"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb186-1"><a href="introduction-to-r.html#cb186-1" tabindex="-1"></a><span class="fu">help</span>(seq)</span></code></pre></div>
<p>To get the top-level help page for a package, for example the <code>base</code> package, issue:</p>
<div class="sourceCode" id="cb187"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb187-1"><a href="introduction-to-r.html#cb187-1" tabindex="-1"></a><span class="fu">help</span>(<span class="at">package=</span>base)</span></code></pre></div>
<p>Help pages are all formatted to have the same sections (additional optional section are possible as well), the most important ones are the first three; Description, Usage and Arguments. These will help remind you how a function works, and what its arguments are.</p>
<p>There is a shortcut to loading a help page, simply prefix the name of the function with a question mark:</p>
<div class="sourceCode" id="cb188"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb188-1"><a href="introduction-to-r.html#cb188-1" tabindex="-1"></a>?seq</span></code></pre></div>
<p>For broader help regarding statistical programming in R look in the library for books such as:</p>
<ul>
<li>Dalgaard, P. (2000). Introductory Statistics with R.</li>
<li>Venables W.N. and Ripley B. D. (1999). Modern Applied Statistics with S-Plus.</li>
</ul>
<p>Compared to these notes, these books offer an alternative explanation regarding how to use R.</p>
<div id="ask-questions" class="section level3 hasAnchor" number="1.8.1">
<h3><span class="header-section-number">1.8.1</span> Ask questions<a href="introduction-to-r.html#ask-questions" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Beyond searching the Internet, you can ask specific questions at www.stackoverflow.com, a searchable forum of questions and answers about all aspects of computer programming. StackOverflow has answered (and archived) thousands of questions related to R programming. So, it is likely that someone else has already asked your question and also got an answer. Use this to your advantage. You can see the latest questions tagged for R at <a href="https://stackoverflow.com/questions/tagged/r" class="uri">https://stackoverflow.com/questions/tagged/r</a> .</p>
<p>Additionally, you can restrict a Google search to StackOverflow by appending <code>site:stackoverflow.com</code> to the end of your Google search.</p>
<p>However, if you a have question that is more about statistical methodology than programming, there are also R users who are active on the the Cross Validated Q&amp;A website, a sister site to StackOverflow.</p>
</div>
<div id="keep-up-to-date-with-the-r-community" class="section level3 hasAnchor" number="1.8.2">
<h3><span class="header-section-number">1.8.2</span> Keep up-to-date with the R community<a href="introduction-to-r.html#keep-up-to-date-with-the-r-community" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Read R-bloggers (www.r-bloggers.com), a blog aggregator that reposts R related articles from across the web. R bloggers is a good place to stumble across R tutorials, announcements, and example data analyses. Though other people’s code may not always be the best.</p>
</div>
</div>
<div id="loops-and-flow" class="section level2 hasAnchor" number="1.9">
<h2><span class="header-section-number">1.9</span> Loops and Flow<a href="introduction-to-r.html#loops-and-flow" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>So far the scripts (and functions) we have created have operated serially (or “linearly”) in that we have only been able to have R perform the various operations we’ve instructed it to in a pre-specified order.</p>
<ul>
<li>The only exception is when we manually click on or highlight specific parts of a script in order to execute them</li>
</ul>
<p>As the tasks we wish to perform become more and more complex, however, it becomes increasingly necessary to be able to dictate how R should move through a script (or the contents of a function) without having to manually click or highlight what we want it to do next.</p>
<p>Perhaps the two most important examples of this are
1. when we want R to perform the same task or operation multiple times
2. when we want R to only perform some of the operations if certain conditions are met</p>
<div id="conditional-statements-and-logical-comparisons" class="section level3 hasAnchor" number="1.9.1">
<h3><span class="header-section-number">1.9.1</span> Conditional Statements and Logical Comparisons<a href="introduction-to-r.html#conditional-statements-and-logical-comparisons" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Like all other programming languages, R can execute a block of code
conditional on whether or not a statement is true. The truth of a statement needs somehow, however, to be communicated to R. This is done with the <code>logical</code> (or Boolean) objects <code>TRUE</code> and <code>FALSE</code>. R uses the common <code>if</code> / <code>else if</code> / <code>else</code> syntax in order to dictate the flow of conditional statements and operations. Using the command <code>if(TRUE){&lt;actions&gt;}</code> will tell R to look inside the <code>if()</code> “function” and as long as its contents are true it will then perform the “actions” listed inside the <code>{}</code> brackets. For example</p>
<div class="sourceCode" id="cb189"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb189-1"><a href="introduction-to-r.html#cb189-1" tabindex="-1"></a><span class="cf">if</span>(<span class="cn">TRUE</span>){</span>
<span id="cb189-2"><a href="introduction-to-r.html#cb189-2" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">&quot;Hello&quot;</span>)</span>
<span id="cb189-3"><a href="introduction-to-r.html#cb189-3" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## [1] &quot;Hello&quot;</code></pre>
<p>Combining an <code>if</code> statement with <code>else</code> will tell R that if the contents of <code>if</code> were not true then it still needs to do something, and that something is contained similarly in <code>{&lt;actions&gt;}</code> notation. For example</p>
<div class="sourceCode" id="cb191"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb191-1"><a href="introduction-to-r.html#cb191-1" tabindex="-1"></a><span class="cf">if</span>(<span class="cn">FALSE</span>){</span>
<span id="cb191-2"><a href="introduction-to-r.html#cb191-2" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">&quot;Hello&quot;</span>)</span>
<span id="cb191-3"><a href="introduction-to-r.html#cb191-3" tabindex="-1"></a>} <span class="cf">else</span>{</span>
<span id="cb191-4"><a href="introduction-to-r.html#cb191-4" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">&quot;Goodbye&quot;</span>)</span>
<span id="cb191-5"><a href="introduction-to-r.html#cb191-5" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## [1] &quot;Goodbye&quot;</code></pre>
<p>So far this is not very useful since we had to explicitly write <code>if(TRUE)</code> or <code>if(FALSE)</code>. But we can assign the values <code>TRUE</code> and <code>FALSE</code> to objects just as we have with other object types.</p>
<div class="sourceCode" id="cb193"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb193-1"><a href="introduction-to-r.html#cb193-1" tabindex="-1"></a>Arriving <span class="ot">&lt;-</span> <span class="cn">TRUE</span></span>
<span id="cb193-2"><a href="introduction-to-r.html#cb193-2" tabindex="-1"></a><span class="cf">if</span>(Arriving){</span>
<span id="cb193-3"><a href="introduction-to-r.html#cb193-3" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">&quot;Hello&quot;</span>)</span>
<span id="cb193-4"><a href="introduction-to-r.html#cb193-4" tabindex="-1"></a>} <span class="cf">else</span>{</span>
<span id="cb193-5"><a href="introduction-to-r.html#cb193-5" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">&quot;Goodbye&quot;</span>)</span>
<span id="cb193-6"><a href="introduction-to-r.html#cb193-6" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## [1] &quot;Hello&quot;</code></pre>
<p>But this is still not very useful since we had to explicitly assign the value <code>TRUE</code> to an object before passing that object to <code>if()</code>.</p>
<div id="logical-comparisons" class="section level4 hasAnchor" number="1.9.1.1">
<h4><span class="header-section-number">1.9.1.1</span> Logical Comparisons<a href="introduction-to-r.html#logical-comparisons" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p><em>Logical comparisons</em> in their simplest form compare the values of two objects and are assigned a value of <code>TRUE</code> or <code>FALSE</code>, depending on the result of this comparison. Logical comparisons are therefore operators, much in the same way <code>+</code>, <code>-</code>, etc. are operators, except the evaluation of the logical comparison is a logical object.</p>
<table>
<caption>A list of the logical comparison operations available in R.</caption>
<thead>
<tr class="header">
<th>Symbol</th>
<th>Comparison</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>&lt;</code></td>
<td>Less than</td>
</tr>
<tr class="even">
<td><code>&gt;</code></td>
<td>Greater than</td>
</tr>
<tr class="odd">
<td><code>&lt;=</code></td>
<td>Less than or equal to</td>
</tr>
<tr class="even">
<td><code>&gt;=</code></td>
<td>Greater than or equal to</td>
</tr>
<tr class="odd">
<td><code>==</code></td>
<td>Equal to</td>
</tr>
<tr class="even">
<td><code>!=</code></td>
<td>Not equal to</td>
</tr>
</tbody>
</table>
<p>For example,</p>
<div class="sourceCode" id="cb195"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb195-1"><a href="introduction-to-r.html#cb195-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb195-2"><a href="introduction-to-r.html#cb195-2" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb195-3"><a href="introduction-to-r.html#cb195-3" tabindex="-1"></a></span>
<span id="cb195-4"><a href="introduction-to-r.html#cb195-4" tabindex="-1"></a>x <span class="sc">==</span> y</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode" id="cb197"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb197-1"><a href="introduction-to-r.html#cb197-1" tabindex="-1"></a>x <span class="sc">&lt;=</span> y</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb199"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb199-1"><a href="introduction-to-r.html#cb199-1" tabindex="-1"></a>x <span class="sc">&lt;</span> y</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb201"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb201-1"><a href="introduction-to-r.html#cb201-1" tabindex="-1"></a>x <span class="sc">&gt;=</span> y</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode" id="cb203"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb203-1"><a href="introduction-to-r.html#cb203-1" tabindex="-1"></a>x <span class="sc">&gt;</span> y</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode" id="cb205"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb205-1"><a href="introduction-to-r.html#cb205-1" tabindex="-1"></a>x <span class="sc">!=</span> y</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>Combining logical comparisons with the <code>if</code>/<code>else</code> commands allows us to create much more dynamic code. The function <code>runif(n, min, max)</code> will produce <span class="math inline">\(n\)</span> random numbers between <code>min</code> and <code>max</code>. Let’s use this function to generate a random time in the day between 06:00 and 18:00. Depending on whether it is morning or afternoon we can print an appropriate statement</p>
<div class="sourceCode" id="cb207"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb207-1"><a href="introduction-to-r.html#cb207-1" tabindex="-1"></a>time <span class="ot">&lt;-</span> <span class="fu">runif</span>(<span class="dv">1</span>, <span class="dv">6</span>, <span class="dv">18</span>)</span>
<span id="cb207-2"><a href="introduction-to-r.html#cb207-2" tabindex="-1"></a></span>
<span id="cb207-3"><a href="introduction-to-r.html#cb207-3" tabindex="-1"></a><span class="cf">if</span>(time <span class="sc">&lt;</span> <span class="dv">12</span>){</span>
<span id="cb207-4"><a href="introduction-to-r.html#cb207-4" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">&quot;Good Morning&quot;</span>)</span>
<span id="cb207-5"><a href="introduction-to-r.html#cb207-5" tabindex="-1"></a>} <span class="cf">else</span>{</span>
<span id="cb207-6"><a href="introduction-to-r.html#cb207-6" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">&quot;Good Afternoon&quot;</span>)</span>
<span id="cb207-7"><a href="introduction-to-r.html#cb207-7" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## [1] &quot;Good Afternoon&quot;</code></pre>
<p>If you run this code multiple times you will see that sometimes it prints “Good Morning” and sometimes “Good Afternoon”. What do you think the following code will do?</p>
<div class="sourceCode" id="cb209"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb209-1"><a href="introduction-to-r.html#cb209-1" tabindex="-1"></a>time <span class="ot">&lt;-</span> <span class="fu">runif</span>(<span class="dv">1</span>, <span class="dv">6</span>, <span class="dv">18</span>)</span>
<span id="cb209-2"><a href="introduction-to-r.html#cb209-2" tabindex="-1"></a></span>
<span id="cb209-3"><a href="introduction-to-r.html#cb209-3" tabindex="-1"></a><span class="cf">if</span>(time <span class="sc">&lt;</span> <span class="dv">12</span>){</span>
<span id="cb209-4"><a href="introduction-to-r.html#cb209-4" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">&quot;Good Morning&quot;</span>)</span>
<span id="cb209-5"><a href="introduction-to-r.html#cb209-5" tabindex="-1"></a>} <span class="cf">else</span> <span class="cf">if</span>(time <span class="sc">&lt;</span> <span class="dv">13</span>){</span>
<span id="cb209-6"><a href="introduction-to-r.html#cb209-6" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">&quot;Can&#39;t talk, eating!&quot;</span>)</span>
<span id="cb209-7"><a href="introduction-to-r.html#cb209-7" tabindex="-1"></a>} <span class="cf">else</span>{</span>
<span id="cb209-8"><a href="introduction-to-r.html#cb209-8" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">&quot;Good Afternoon&quot;</span>)</span>
<span id="cb209-9"><a href="introduction-to-r.html#cb209-9" tabindex="-1"></a>}</span></code></pre></div>
<p>Try it out many times and see. If you want you can also print the value of <code>time</code> each time to validate your understanding.</p>
<p>Hopefully it is clear that the <code>else if</code> command will create a new “option”, which splits the “Good Morning”’s from the “Good Afternoon”’s if it happens to be lunch time. You can add as many <code>else if</code>’s as you want.</p>
<p>As an alternative we can apply <em>Boolean operations</em> which provide an “algebra” for working with logical objects.</p>
<table>
<caption>A list of the Boolean operators available in R.</caption>
<thead>
<tr class="header">
<th>Symbol</th>
<th>Phrase</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>&amp;</code></td>
<td>And (ampersand)</td>
</tr>
<tr class="even">
<td><code>|</code></td>
<td>Or (vertical bar)</td>
</tr>
<tr class="odd">
<td><code>!</code></td>
<td>Not or negation (exclamation)</td>
</tr>
</tbody>
</table>
<p>The operators <code>&amp;</code> and <code>|</code> connect two logical comparisons and return <code>TRUE</code> or <code>FALSE</code> depending on the joint truth or falsehood of the two logical comparisons.</p>
<p>The <code>&amp;</code> returns <code>TRUE</code> only when <em>both</em> of the comparisons are true. While <code>|</code> returns <code>TRUE</code> if <em>at least one</em> of the comparisons is true. For example the following two conditionals are equivalent</p>
<div class="sourceCode" id="cb210"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb210-1"><a href="introduction-to-r.html#cb210-1" tabindex="-1"></a><span class="cf">if</span>(time <span class="sc">&lt;</span> <span class="dv">12</span> <span class="sc">|</span> time <span class="sc">&gt;=</span> <span class="dv">13</span>){</span>
<span id="cb210-2"><a href="introduction-to-r.html#cb210-2" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">&quot;Hello!&quot;</span>)</span>
<span id="cb210-3"><a href="introduction-to-r.html#cb210-3" tabindex="-1"></a>} <span class="cf">else</span>{</span>
<span id="cb210-4"><a href="introduction-to-r.html#cb210-4" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">&quot;Can&#39;t talk, eating!&quot;</span>)</span>
<span id="cb210-5"><a href="introduction-to-r.html#cb210-5" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## [1] &quot;Hello!&quot;</code></pre>
<div class="sourceCode" id="cb212"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb212-1"><a href="introduction-to-r.html#cb212-1" tabindex="-1"></a><span class="cf">if</span>(time <span class="sc">&gt;=</span> <span class="dv">12</span> <span class="sc">&amp;</span> time <span class="sc">&lt;</span> <span class="dv">13</span>){</span>
<span id="cb212-2"><a href="introduction-to-r.html#cb212-2" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">&quot;Can&#39;t talk, eating!&quot;</span>)</span>
<span id="cb212-3"><a href="introduction-to-r.html#cb212-3" tabindex="-1"></a>} <span class="cf">else</span>{</span>
<span id="cb212-4"><a href="introduction-to-r.html#cb212-4" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">&quot;Hello!&quot;</span>)</span>
<span id="cb212-5"><a href="introduction-to-r.html#cb212-5" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## [1] &quot;Hello!&quot;</code></pre>
<p><strong>Conditional Statements inside Functions</strong></p>
<p>Let’s look at using conditional statements within a function. The following function will simulate the rolling of a six-sided die. Although this is a very inefficient way of achieving it, see if you can understand how it is working.</p>
<div class="sourceCode" id="cb214"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb214-1"><a href="introduction-to-r.html#cb214-1" tabindex="-1"></a>roll_die <span class="ot">&lt;-</span> <span class="cf">function</span>(){</span>
<span id="cb214-2"><a href="introduction-to-r.html#cb214-2" tabindex="-1"></a>  r <span class="ot">&lt;-</span> <span class="fu">runif</span>(<span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">1</span>)</span>
<span id="cb214-3"><a href="introduction-to-r.html#cb214-3" tabindex="-1"></a>  <span class="cf">if</span>(r <span class="sc">&lt;</span> <span class="dv">1</span><span class="sc">/</span><span class="dv">6</span>){</span>
<span id="cb214-4"><a href="introduction-to-r.html#cb214-4" tabindex="-1"></a>    face <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb214-5"><a href="introduction-to-r.html#cb214-5" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span>(r <span class="sc">&lt;</span> <span class="dv">2</span><span class="sc">/</span><span class="dv">6</span>){</span>
<span id="cb214-6"><a href="introduction-to-r.html#cb214-6" tabindex="-1"></a>    face <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb214-7"><a href="introduction-to-r.html#cb214-7" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span>(r <span class="sc">&lt;</span> <span class="dv">3</span><span class="sc">/</span><span class="dv">6</span>){</span>
<span id="cb214-8"><a href="introduction-to-r.html#cb214-8" tabindex="-1"></a>    face <span class="ot">&lt;-</span> <span class="dv">3</span></span>
<span id="cb214-9"><a href="introduction-to-r.html#cb214-9" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span>(r <span class="sc">&lt;</span> <span class="dv">4</span><span class="sc">/</span><span class="dv">6</span>){</span>
<span id="cb214-10"><a href="introduction-to-r.html#cb214-10" tabindex="-1"></a>    face <span class="ot">&lt;-</span> <span class="dv">4</span></span>
<span id="cb214-11"><a href="introduction-to-r.html#cb214-11" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span>(r <span class="sc">&lt;</span> <span class="dv">5</span><span class="sc">/</span><span class="dv">6</span>){</span>
<span id="cb214-12"><a href="introduction-to-r.html#cb214-12" tabindex="-1"></a>    face <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb214-13"><a href="introduction-to-r.html#cb214-13" tabindex="-1"></a>  } <span class="cf">else</span>{</span>
<span id="cb214-14"><a href="introduction-to-r.html#cb214-14" tabindex="-1"></a>    face <span class="ot">&lt;-</span> <span class="dv">6</span></span>
<span id="cb214-15"><a href="introduction-to-r.html#cb214-15" tabindex="-1"></a>  }</span>
<span id="cb214-16"><a href="introduction-to-r.html#cb214-16" tabindex="-1"></a>  <span class="fu">return</span>(face)</span>
<span id="cb214-17"><a href="introduction-to-r.html#cb214-17" tabindex="-1"></a>}</span></code></pre></div>
<p>Note that the function takes no arguments since nothing which is needed to perform the operations inside the function is variable.</p>
</div>
</div>
<div id="loops" class="section level3 hasAnchor" number="1.9.2">
<h3><span class="header-section-number">1.9.2</span> Loops<a href="introduction-to-r.html#loops" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Wrapping a block of code (like the <code>&lt;actions&gt;</code> in the conditional context aove) inside a <code>for</code> loop, means that the code can be
repeatedly executed. Because of this, a <code>for</code> loop is classified as an
iteration statement; we repeatedly iterate over the same code, with,
typically, only one or two parameters (iterators) changing each time.</p>
<p>When writing a <code>for</code> loop we need to provide a name for the <em>iterator variable</em>. This is a variable whose value will change with each application of the code inside the loop. We also need to specify a vector containing the values we wish this iterator to assume with each iteration. By far the most common situation is when we iterate over sequences of natural numbers.</p>
<p>Let’s consider an example. You may all be familiar with the Fibonacci sequence. This sequence is a simplistic description of population growth, and works as follows. Starting with 1 and 1, each subsequent number is the sum of the previous two. The following code can be used to produce the first <code>n</code> Fibonacci numbers</p>
<div class="sourceCode" id="cb215"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb215-1"><a href="introduction-to-r.html#cb215-1" tabindex="-1"></a><span class="do">### Let&#39;s first choose a number for n, say 30</span></span>
<span id="cb215-2"><a href="introduction-to-r.html#cb215-2" tabindex="-1"></a>n <span class="ot">&lt;-</span> <span class="dv">30</span></span>
<span id="cb215-3"><a href="introduction-to-r.html#cb215-3" tabindex="-1"></a></span>
<span id="cb215-4"><a href="introduction-to-r.html#cb215-4" tabindex="-1"></a><span class="do">### Now we can initiate a vector to store the first n</span></span>
<span id="cb215-5"><a href="introduction-to-r.html#cb215-5" tabindex="-1"></a><span class="do">### numbers in the sequence</span></span>
<span id="cb215-6"><a href="introduction-to-r.html#cb215-6" tabindex="-1"></a>fib <span class="ot">&lt;-</span> <span class="fu">numeric</span>(n)</span>
<span id="cb215-7"><a href="introduction-to-r.html#cb215-7" tabindex="-1"></a>fib[<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb215-8"><a href="introduction-to-r.html#cb215-8" tabindex="-1"></a></span>
<span id="cb215-9"><a href="introduction-to-r.html#cb215-9" tabindex="-1"></a><span class="do">### Now we can begin our loop. Since we already know the</span></span>
<span id="cb215-10"><a href="introduction-to-r.html#cb215-10" tabindex="-1"></a><span class="do">### first two values we need to start adding from the</span></span>
<span id="cb215-11"><a href="introduction-to-r.html#cb215-11" tabindex="-1"></a><span class="do">### third. We can use the iterator &quot;i&quot;</span></span>
<span id="cb215-12"><a href="introduction-to-r.html#cb215-12" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">3</span><span class="sc">:</span>n){</span>
<span id="cb215-13"><a href="introduction-to-r.html#cb215-13" tabindex="-1"></a>  <span class="do">### Now we define the operation(s) which we want R</span></span>
<span id="cb215-14"><a href="introduction-to-r.html#cb215-14" tabindex="-1"></a>  <span class="do">### to perform iteratively as i changes, starting</span></span>
<span id="cb215-15"><a href="introduction-to-r.html#cb215-15" tabindex="-1"></a>  <span class="do">### from 3, then 4, then 5, etc.</span></span>
<span id="cb215-16"><a href="introduction-to-r.html#cb215-16" tabindex="-1"></a>  </span>
<span id="cb215-17"><a href="introduction-to-r.html#cb215-17" tabindex="-1"></a>  <span class="do">### We know that we want the i-th value in the sequence</span></span>
<span id="cb215-18"><a href="introduction-to-r.html#cb215-18" tabindex="-1"></a>  <span class="do">### to be the sum of the previous two. These will</span></span>
<span id="cb215-19"><a href="introduction-to-r.html#cb215-19" tabindex="-1"></a>  <span class="do">### be in the indices i-1 and i-2</span></span>
<span id="cb215-20"><a href="introduction-to-r.html#cb215-20" tabindex="-1"></a>  fib[i] <span class="ot">&lt;-</span> fib[i<span class="dv">-1</span>] <span class="sc">+</span> fib[i<span class="dv">-2</span>]</span>
<span id="cb215-21"><a href="introduction-to-r.html#cb215-21" tabindex="-1"></a>}</span>
<span id="cb215-22"><a href="introduction-to-r.html#cb215-22" tabindex="-1"></a></span>
<span id="cb215-23"><a href="introduction-to-r.html#cb215-23" tabindex="-1"></a>fib</span></code></pre></div>
<pre><code>##  [1]      1      1      2      3      5      8     13     21     34     55
## [11]     89    144    233    377    610    987   1597   2584   4181   6765
## [21]  10946  17711  28657  46368  75025 121393 196418 317811 514229 832040</code></pre>
<p>In the above our iterator moved through the vector <code>3:n</code> and R ran the chunk of code inside the <code>{}</code> brackets once for each such value of the iterator. We can equally “loop” over the contents of any other vector. For example, we can create a vector containing the names of the planets in the solar system, and then iterate over these.</p>
<div class="sourceCode" id="cb217"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb217-1"><a href="introduction-to-r.html#cb217-1" tabindex="-1"></a>planet_names <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;Mercury&quot;</span>, <span class="st">&quot;Venus&quot;</span>, <span class="st">&quot;Earth&quot;</span>,</span>
<span id="cb217-2"><a href="introduction-to-r.html#cb217-2" tabindex="-1"></a>        <span class="st">&quot;Mars&quot;</span>, <span class="st">&quot;Jupiter&quot;</span>, <span class="st">&quot;Saturn&quot;</span>,</span>
<span id="cb217-3"><a href="introduction-to-r.html#cb217-3" tabindex="-1"></a>        <span class="st">&quot;Uranus&quot;</span>, <span class="st">&quot;Neptune&quot;</span>)</span>
<span id="cb217-4"><a href="introduction-to-r.html#cb217-4" tabindex="-1"></a></span>
<span id="cb217-5"><a href="introduction-to-r.html#cb217-5" tabindex="-1"></a><span class="cf">for</span>(name <span class="cf">in</span> planet_names){</span>
<span id="cb217-6"><a href="introduction-to-r.html#cb217-6" tabindex="-1"></a>  <span class="fu">print</span>(name)</span>
<span id="cb217-7"><a href="introduction-to-r.html#cb217-7" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## [1] &quot;Mercury&quot;
## [1] &quot;Venus&quot;
## [1] &quot;Earth&quot;
## [1] &quot;Mars&quot;
## [1] &quot;Jupiter&quot;
## [1] &quot;Saturn&quot;
## [1] &quot;Uranus&quot;
## [1] &quot;Neptune&quot;</code></pre>
<p><strong>NB:</strong> It is important to choose the names of your iterators carefully. If you use the same name as an object you have already defined then R will overwrite your other object with the value of the iterator.</p>
<div class="sourceCode" id="cb219"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb219-1"><a href="introduction-to-r.html#cb219-1" tabindex="-1"></a>i <span class="ot">&lt;-</span> <span class="dv">10</span></span>
<span id="cb219-2"><a href="introduction-to-r.html#cb219-2" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>){</span>
<span id="cb219-3"><a href="introduction-to-r.html#cb219-3" tabindex="-1"></a>  <span class="fu">print</span>(i)</span>
<span id="cb219-4"><a href="introduction-to-r.html#cb219-4" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## [1] 1
## [1] 2
## [1] 3</code></pre>
<div class="sourceCode" id="cb221"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb221-1"><a href="introduction-to-r.html#cb221-1" tabindex="-1"></a>i</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<p>Sometimes we need to repeatedly perform a set of commands but we don’t know initially exactly how many times. This can be achieved with <code>while</code> loops, which will iteratively apply a chunk of code as long as a certain condition remains true, i.e. <em>while</em> it is true. That is, a <code>while</code> loop will continue to iterate as long as the argument to <code>while</code> evaluates to <code>TRUE</code>. Because <code>while</code> loops don’t require an iterator, if we want the value of something to change each time then we need to do this explicitly.</p>
<div class="sourceCode" id="cb223"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb223-1"><a href="introduction-to-r.html#cb223-1" tabindex="-1"></a>i <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb223-2"><a href="introduction-to-r.html#cb223-2" tabindex="-1"></a><span class="cf">while</span>(i <span class="sc">&lt;</span> <span class="dv">10</span>){</span>
<span id="cb223-3"><a href="introduction-to-r.html#cb223-3" tabindex="-1"></a>  <span class="fu">print</span>(i)</span>
<span id="cb223-4"><a href="introduction-to-r.html#cb223-4" tabindex="-1"></a>  i <span class="ot">&lt;-</span> i<span class="sc">+</span><span class="dv">1</span></span>
<span id="cb223-5"><a href="introduction-to-r.html#cb223-5" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## [1] 1
## [1] 2
## [1] 3
## [1] 4
## [1] 5
## [1] 6
## [1] 7
## [1] 8
## [1] 9</code></pre>
<p>Loops using <code>while</code> are particularly useful in algorithms which often rely on iterating over a set of operations until some criterion (such as convergence) is met. For example, the ratio of consecutive entries in the Fibonacci sequence converges to the so-called “golden ratio” of (approximately) 1.61803398875. The following code will generate the sequence until it has converged. When it comes to convergence we typically only asymptote at the “limit” point meaning the ratio will not exactly equal the golden ratio but will get closer and closer to it. We can set a <code>tolerance</code> for how close we wish to get for it to be sufficiently close to convergence.</p>
<div class="sourceCode" id="cb225"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb225-1"><a href="introduction-to-r.html#cb225-1" tabindex="-1"></a><span class="do">### Set a very small tolerance</span></span>
<span id="cb225-2"><a href="introduction-to-r.html#cb225-2" tabindex="-1"></a>tol <span class="ot">&lt;-</span> <span class="dv">10</span><span class="sc">^-</span><span class="dv">7</span></span>
<span id="cb225-3"><a href="introduction-to-r.html#cb225-3" tabindex="-1"></a></span>
<span id="cb225-4"><a href="introduction-to-r.html#cb225-4" tabindex="-1"></a><span class="do">### Set the constant to which the sequence converges</span></span>
<span id="cb225-5"><a href="introduction-to-r.html#cb225-5" tabindex="-1"></a>GR <span class="ot">&lt;-</span> <span class="fl">1.61803398875</span></span>
<span id="cb225-6"><a href="introduction-to-r.html#cb225-6" tabindex="-1"></a></span>
<span id="cb225-7"><a href="introduction-to-r.html#cb225-7" tabindex="-1"></a><span class="do">### Now we can initiate the sequence and then iterate</span></span>
<span id="cb225-8"><a href="introduction-to-r.html#cb225-8" tabindex="-1"></a><span class="do">### until convergence. We can use a variable l to</span></span>
<span id="cb225-9"><a href="introduction-to-r.html#cb225-9" tabindex="-1"></a><span class="do">### represent the length of the sequence and tidy</span></span>
<span id="cb225-10"><a href="introduction-to-r.html#cb225-10" tabindex="-1"></a><span class="do">### up our code a little</span></span>
<span id="cb225-11"><a href="introduction-to-r.html#cb225-11" tabindex="-1"></a>fib <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">1</span>)</span>
<span id="cb225-12"><a href="introduction-to-r.html#cb225-12" tabindex="-1"></a>l <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb225-13"><a href="introduction-to-r.html#cb225-13" tabindex="-1"></a></span>
<span id="cb225-14"><a href="introduction-to-r.html#cb225-14" tabindex="-1"></a><span class="cf">while</span>(<span class="fu">abs</span>(fib[l]<span class="sc">/</span>fib[l<span class="dv">-1</span>] <span class="sc">-</span> GR) <span class="sc">&gt;</span> tol){</span>
<span id="cb225-15"><a href="introduction-to-r.html#cb225-15" tabindex="-1"></a>  <span class="do">### increase l as we will be adding another element</span></span>
<span id="cb225-16"><a href="introduction-to-r.html#cb225-16" tabindex="-1"></a>  <span class="do">### to fib</span></span>
<span id="cb225-17"><a href="introduction-to-r.html#cb225-17" tabindex="-1"></a>  l <span class="ot">&lt;-</span> l <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb225-18"><a href="introduction-to-r.html#cb225-18" tabindex="-1"></a>  </span>
<span id="cb225-19"><a href="introduction-to-r.html#cb225-19" tabindex="-1"></a>  fib[l] <span class="ot">&lt;-</span> fib[l<span class="dv">-1</span>] <span class="sc">+</span> fib[l<span class="dv">-2</span>]</span>
<span id="cb225-20"><a href="introduction-to-r.html#cb225-20" tabindex="-1"></a>}</span>
<span id="cb225-21"><a href="introduction-to-r.html#cb225-21" tabindex="-1"></a>l</span></code></pre></div>
<pre><code>## [1] 19</code></pre>
<p>We see that it only took until the 19-th element in the sequence to
come extremely close to convergence.</p>
</div>
<div id="exercises-2" class="section level3 hasAnchor" number="1.9.3">
<h3><span class="header-section-number">1.9.3</span> Exercises<a href="introduction-to-r.html#exercises-2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li><p>Modify the function which simulates the rolling of a die to instead take an argument <code>n</code> and return a vector with the rolls from <code>n</code> dice.</p></li>
<li><p>Write a piece of code which can evaluate the proportion of times each of the values <code>1:6</code> comes up when rolling <code>n</code> dice. See if these proportions match what you would expect.</p></li>
</ul>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>

<a href="working-with-data-in-r.html" class="navigation navigation-next navigation-unique" aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
  "sharing": {
    "github": false,
    "facebook": true,
    "twitter": true,
    "linkedin": false,
    "weibo": false,
    "instapaper": false,
    "vk": false,
    "whatsapp": false,
    "all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
  },
  "fontsettings": {
    "theme": "white",
    "family": "sans",
    "size": 2
  },
  "edit": {
    "link": null,
    "text": null
  },
  "history": {
    "link": null,
    "text": null
  },
  "view": {
    "link": null,
    "text": null
  },
  "download": null,
  "search": {
    "engine": "fuse",
    "options": null
  },
  "toc": {
    "collapse": "subsection"
  }
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
